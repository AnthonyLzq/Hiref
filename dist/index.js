!function(e){var r={};function t(s){if(r[s])return r[s].exports;var n=r[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(s,n,function(r){return e[r]}.bind(null,n));return s},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/dist/",t(t.s=6)}([function(e,r){e.exports=require("mongoose")},function(e,r){e.exports=require("express")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.response=void 0;r.response=function(e,r,t,s){t.status(s).send({error:e,message:r})}},function(e,r,t){"use strict";var s,n,o,a,i;Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorMessagesForTasksController=r.ErrorMessagesForProjectsController=r.ErrorMessagesForJobOffersController=r.ErrorMessagesForJobsController=r.GeneralErrorMessages=void 0,function(e){e.invalidDate="Invalid Date",e.missingCode="Code must be provided.",e.missingDeadline="Deadline must be provided.",e.missingDescription="Description must be provided.",e.missingIdCompany="Id Company must be provided.",e.missingIdProject="Id project must be provided.",e.missingStatus="Status must be provided.",e.problemUpdatingStatus="There was a problem trying to update the status.",e.statusNotAllowed="That status is not allowed."}(s||(s={})),r.GeneralErrorMessages=s,function(e){e.problemGettingAll="There was a problem getting all the jobs."}(n||(n={})),r.ErrorMessagesForJobsController=n,function(e){e.missingOccupations="Occupations must be provided.",e.missingRoles="Roles must be provided.",e.problemDeletingJobOffer="There was a problem deleting the job offer",e.problemGettingAll="There was a problem getting all the job offers",e.problemGettingAllByOccupations="There was a problem getting all the job offers for the requested project.",e.problemGettingAllByProject="There was a problem getting all the job offers for the requested project.",e.problemGettingAllForAspirant="There was a problem getting all the job offers for the requested aspirant.",e.problemGettingAllForEvaluator="There was a problem getting all the job offers for the requested aspirant.",e.problemStoringJobOffers="There was a problem trying to store the requested job offer."}(o||(o={})),r.ErrorMessagesForJobOffersController=o,function(e){e.missingSupervisor="Supervisor(s) must be provided.",e.problemGettingAllByCompany="There was a problem getting all the projects from the requested company.",e.problemGettingAllByStatus="There was a problem getting all the projects from the requested company int he requested status.",e.problemStoringProjects="There was a problem trying to store the project.",e.problemUpdatingProjects="There was a problem trying to update the project."}(a||(a={})),r.ErrorMessagesForProjectsController=a,function(e){e.missingResponsible="Responsible must be provided.",e.missingSubTasks="Sub tasks must be provided.",e.problemDeletingTasks="There was a problem deleting the task.",e.problemGettingAll="There was a problem getting all the tasks.",e.problemStoringTasks="There was a problem trying to store the task.",e.problemUpdatingTasks="There was a problem trying to update the task."}(i||(i={})),r.ErrorMessagesForTasksController=i},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.extendSchema=void 0;var n=t(0),o=t(5);r.extendSchema=function(e,r){var t=new n.Schema(s(s({},o.CommonDataForProjectsTasksAndJobOffers.obj),{status:{enum:r,required:!0,type:String}}));return new n.Schema(s(s({},e.obj),t.obj))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CommonDataForProjectsTasksAndJobOffers=void 0;var s=t(0),n=t(16),o=new s.Schema({code:{required:!1,type:String,unique:!0},deadline:{required:!0,type:String},description:{required:!0,type:n.Information}},{timestamps:{createdAt:!0,updatedAt:!0}});r.CommonDataForProjectsTasksAndJobOffers=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t(7).Server.start()},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Server=void 0;var a=o(t(1)),i=o(t(8)),u=t(9),l=t(24),c=t(25),f=new(function(){function e(){this.app=a.default(),this._config()}return e.prototype._config=function(){this.app.set("port",process.env.PORT||"3000"),this.app.use(i.default("dev")),this.app.use(a.default.json()),this.app.use(a.default.urlencoded({extended:!1})),this.app.use((function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Headers","Authorization, Content-Type"),t()})),u.applyRoutes(this.app)},e.prototype._mongo=function(){return s(this,void 0,void 0,(function(){return n(this,(function(e){return this._mongoConnection=l.mongoConnection,this._mongoConnection(),[2]}))}))},e.prototype._mysql=function(){return s(this,void 0,void 0,(function(){return n(this,(function(e){return this._mysqlConnection=c.mysqlConnection,this._mysqlConnection(),[2]}))}))},e.prototype.start=function(){var e=this;this.app.listen(this.app.get("port"),(function(){return console.log("Server running at port "+e.app.get("port")+".")}));try{this._mongo(),this._mysql()}catch(e){console.error(e)}},e}());r.Server=f},function(e,r){e.exports=require("morgan")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyRoutes=void 0;var s=t(10),n=t(11),o=t(13),a=t(17),i=t(20),u=[o.JobOffers,n.Jobs,a.Projects,i.Tasks];r.applyRoutes=function(e){e.use("/",s.Home),u.forEach((function(r){return e.use("/api",r)}))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Home=void 0;var s=t(1),n=t(2),o=s.Router();r.Home=o,o.route("").get((function(e,r){n.response(!1,"Welcome to your Express Backend!",r,200)}))},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Jobs=void 0;var o=t(1),a=t(2),i=t(12),u=o.Router();r.Jobs=u,u.route("/jobs").get((function(e,r){return s(void 0,void 0,void 0,(function(){var e,t,s;return n(this,(function(n){switch(n.label){case 0:e=new i.Jobs,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.process("getAll")];case 2:return t=n.sent(),a.response(!1,{result:t},r,200),[3,4];case 3:return s=n.sent(),a.response(!0,{message:s.message},r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Jobs=void 0;var o=t(3),a=function(){function e(){this._allJobs=[]}return e.prototype.process=function(e){switch(e){case"getAll":return this._getAll();default:return}},e.prototype._getAll=function(){return s(this,void 0,void 0,(function(){var e,r,t,s=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,global.mysqlDatabase.select("id_jobfamily as id","description as jobFamily").from("jobfamily")];case 1:return e=n.sent(),[4,global.mysqlDatabase.select("j.id_jobfamily as jobFamilyId","o.id_ocupation as occupationId","o.description as occupation").from({j:"jobfamily"}).innerJoin({o:"ocupation"},"j.id_jobfamily","=","o.idfk_jobfamily")];case 2:return r=n.sent(),e.forEach((function(e){var t=[];r.forEach((function(r){r.jobFamilyId===e.id&&t.push({occupation:r.occupation,occupationId:r.occupationId})})),s._allJobs.push({jobFamily:e,occupations:t})})),[2,this._allJobs];case 3:throw t=n.sent(),console.error(t),new Error(o.ErrorMessagesForJobsController.problemGettingAll);case 4:return[2]}}))}))},e}();r.Jobs=a},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.JobOffers=void 0;var a=t(1),i=t(2),u=t(14),l=a.Router();r.JobOffers=l,l.route("/jobOffers/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var e,t,s;return o(this,(function(n){switch(n.label){case 0:e=new u.JobOffers,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.process("getAll")];case 2:return t=n.sent(),i.response(!1,{result:t},r,200),[3,4];case 3:return s=n.sent(),i.response(!0,{message:s.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/:idProject").post((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,a,l,c;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,n=e.params.idProject,a=new u.JobOffers(s(s({},t),{idProject:n})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.process("store")];case 2:return l=o.sent(),i.response(!1,{result:l},r,200),[3,4];case 3:return c=o.sent(),i.response(!0,{message:c.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/:idProject/:idJobOffer/").patch((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,a,l,c,f,p,d,h,g;return o(this,(function(o){switch(o.label){case 0:if(t=e.body.args,n=e.params,a=n.idJobOffer,l=n.idProject,(c=e.query)&&0!==Object.keys(c).length)return[3,5];f=new u.JobOffers(s(s({},t),{id:a,idProject:l})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,f.process("store")];case 2:return p=o.sent(),i.response(!1,{result:p},r,200),[3,4];case 3:return d=o.sent(),i.response(!0,{message:d.message},r,500),[3,4];case 4:return[3,9];case 5:h=c.status,f=new u.JobOffers({id:a,status:h}),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,f.process("updateStatus")];case 7:return p=o.sent(),i.response(!1,{result:p},r,200),[3,9];case 8:return g=o.sent(),i.response(!0,{message:g.message},r,500),[3,9];case 9:return[2]}}))}))})),l.route("/jobOffers/getAllByProject/:idProject").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,s,n,a;return o(this,(function(o){switch(o.label){case 0:t=e.params.idProject,s=new u.JobOffers({idProject:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.process("getAllByProject")];case 2:return n=o.sent(),i.response(!1,{result:n},r,200),[3,4];case 3:return a=o.sent(),i.response(!0,{message:a.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/getAllByOccupations/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,s,n,a;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,s=new u.JobOffers(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.process("getAllByOccupations")];case 2:return n=o.sent(),i.response(!1,{result:n},r,200),[3,4];case 3:return a=o.sent(),i.response(!0,{message:a.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/getAllForAspirant/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,s,n,a;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,s=new u.JobOffers(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.process("getAllForAspirant")];case 2:return n=o.sent(),i.response(!1,{result:n},r,200),[3,4];case 3:return a=o.sent(),i.response(!0,{message:a.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/getAllForEvaluator/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,s,n,a;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,s=new u.JobOffers(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.process("getAllForEvaluator")];case 2:return n=o.sent(),i.response(!1,{result:n},r,200),[3,4];case 3:return a=o.sent(),i.response(!0,{message:a.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/:idJobOffer/").delete((function(e,r){return n(void 0,void 0,void 0,(function(){var t,s,n,a;return o(this,(function(o){switch(o.label){case 0:t=e.params.idJobOffer,s=new u.JobOffers({id:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.process("deleteOne")];case 2:return n=o.sent(),i.response(!1,{result:n},r,200),[3,4];case 3:return a=o.sent(),i.response(!0,{message:a.message},r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},o=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var s,n,o=t.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(n)throw n.error}}return a},a=this&&this.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(o(arguments[r]));return e};Object.defineProperty(r,"__esModule",{value:!0}),r.JobOffers=void 0;var i=t(0),u=t(15),l=t(3),c=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"deleteOne":return this._deleteOne();case"getAll":return this._getAll();case"getAllByProject":return this._getAllByProject();case"getAllByOccupations":return this._getAllByOccupations();case"getAllForAspirant":return this._getAllForAspirant();case"getAllForEvaluator":return this._getAllForEvaluator();case"store":return this._store();case"update":return this._update();case"updateStatus":return this._updateStatus();default:return}},e.prototype._deleteOne=function(){return s(this,void 0,void 0,(function(){var e,r;return n(this,(function(t){switch(t.label){case 0:e=this._args.id,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.JobOffersModel.findByIdAndDelete(e)];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(l.ErrorMessagesForJobOffersController.problemDeletingJobOffer);case 4:return[2]}}))}))},e.prototype._getAll=function(){return s(this,void 0,void 0,(function(){var e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,u.JobOffersModel.find({$or:[{status:"published"},{status:"rePublished"}]})];case 1:return[2,r.sent()];case 2:throw e=r.sent(),console.error(e),new Error(l.ErrorMessagesForJobOffersController.problemGettingAll);case 3:return[2]}}))}))},e.prototype._getAllByProject=function(){return s(this,void 0,void 0,(function(){var e,r;return n(this,(function(t){switch(t.label){case 0:e=this._args.idProject,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.JobOffersModel.find({idProject:new i.Schema.Types.ObjectId(e)})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(l.ErrorMessagesForJobOffersController.problemGettingAllByProject);case 4:return[2]}}))}))},e.prototype._getAllByOccupations=function(){return s(this,void 0,void 0,(function(){var e,r;return n(this,(function(t){switch(t.label){case 0:e=this._args.occupations,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.JobOffersModel.find({occupations:{$in:e}})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(l.ErrorMessagesForJobOffersController.problemGettingAllByOccupations);case 4:return[2]}}))}))},e.prototype._getAllForAspirant=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,o,c,f,p,d;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.accepted,t=e.occupations,s=e.rejected,o=r.map((function(e){return new i.Schema.Types.ObjectId(e)})),c=s.map((function(e){return new i.Schema.Types.ObjectId(e)})),f=a(o,c),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.all([u.JobOffersModel.find({_id:{$nin:f},occupations:{$in:t}}),u.JobOffersModel.find({_id:{$in:o},occupations:{$in:t}}),u.JobOffersModel.find({_id:{$in:c},occupations:{$in:t}})])];case 2:return[2,{acceptedJobOffers:(p=n.sent())[1],availableJobOffers:p[0],rejectedJobOffers:p[2]}];case 3:throw d=n.sent(),console.error(d),new Error(l.ErrorMessagesForJobOffersController.problemGettingAllForAspirant);case 4:return[2]}}))}))},e.prototype._getAllForEvaluator=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,o,c,f,p;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.completed,t=e.inEvaluation,s=r.map((function(e){return new i.Schema.Types.ObjectId(e)})),o=t.map((function(e){return new i.Schema.Types.ObjectId(e)})),c=a(s,o),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.all([u.JobOffersModel.find({_id:{$in:c}}),u.JobOffersModel.find({_id:{$in:t}}),u.JobOffersModel.find({_id:{$in:s}})])];case 2:return[2,{availableJobOffers:(f=n.sent())[0],completedJobOffers:f[2],inEvaluationJobOffers:f[1]}];case 3:throw p=n.sent(),console.error(p),new Error(l.ErrorMessagesForJobOffersController.problemGettingAllForEvaluator);case 4:return[2]}}))}))},e.prototype._store=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,o,a,i,c,f;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.code,t=e.deadline,s=e.description,o=e.idProject,a=e.occupations,i=e.roles,c=e.status,n.label=1;case 1:if(n.trys.push([1,3,,4]),!r)throw new Error(l.GeneralErrorMessages.missingCode);if(!t)throw new Error(l.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(l.GeneralErrorMessages.invalidDate);if(!s)throw new Error(l.GeneralErrorMessages.missingDescription);if(!o)throw new Error(l.GeneralErrorMessages.missingIdProject);if(!a)throw new Error(l.ErrorMessagesForJobOffersController.missingOccupations);if(!i)throw new Error(l.ErrorMessagesForJobOffersController.missingRoles);if(!c)throw new Error(l.GeneralErrorMessages.missingStatus);if(!u.STATUS_NAMES.includes(c))throw new Error(l.GeneralErrorMessages.statusNotAllowed);return[4,new u.JobOffersModel({code:r,deadline:new Date(t),description:s,idProject:o,occupations:a,roles:i,status:c}).save()];case 2:return[2,n.sent()];case 3:throw(f=n.sent()).message===l.GeneralErrorMessages.missingCode||f.message===l.GeneralErrorMessages.missingDeadline||f.message===l.GeneralErrorMessages.invalidDate||f.message===l.GeneralErrorMessages.missingDescription||f.message===l.GeneralErrorMessages.missingDescription||f.message===l.GeneralErrorMessages.missingIdProject||f.message===l.ErrorMessagesForJobOffersController.missingOccupations||f.message===l.ErrorMessagesForJobOffersController.missingRoles||f.message===l.GeneralErrorMessages.missingStatus||f.message===l.GeneralErrorMessages.statusNotAllowed?f:(console.error(f),new Error(l.ErrorMessagesForJobOffersController.problemStoringJobOffers));case 4:return[2]}}))}))},e.prototype._update=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,o,a,c,f,p,d;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.code,t=e.deadline,s=e.description,o=e.id,a=e.idProject,c=e.occupations,f=e.roles,p=e.status,n.label=1;case 1:if(n.trys.push([1,3,,4]),!r)throw new Error(l.GeneralErrorMessages.missingCode);if(!t)throw new Error(l.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(l.GeneralErrorMessages.invalidDate);if(!s)throw new Error(l.GeneralErrorMessages.missingDescription);if(!a)throw new Error(l.GeneralErrorMessages.missingIdProject);if(!c)throw new Error(l.ErrorMessagesForJobOffersController.missingOccupations);if(!f)throw new Error(l.ErrorMessagesForJobOffersController.missingRoles);if(!p)throw new Error(l.GeneralErrorMessages.missingStatus);if(!u.STATUS_NAMES.includes(p))throw new Error(l.GeneralErrorMessages.statusNotAllowed);return[4,u.JobOffersModel.findByIdAndUpdate(o,{code:r,deadline:new Date(t),description:s,idProject:new i.Schema.Types.ObjectId(a),occupations:c,roles:f,status:p},{new:!0})];case 2:return[2,n.sent()];case 3:throw(d=n.sent()).message===l.GeneralErrorMessages.missingCode||d.message===l.GeneralErrorMessages.missingDeadline||d.message===l.GeneralErrorMessages.invalidDate||d.message===l.GeneralErrorMessages.missingDescription||d.message===l.GeneralErrorMessages.missingDescription||d.message===l.GeneralErrorMessages.missingIdProject||d.message===l.ErrorMessagesForJobOffersController.missingOccupations||d.message===l.ErrorMessagesForJobOffersController.missingRoles||d.message===l.GeneralErrorMessages.missingStatus||d.message===l.GeneralErrorMessages.statusNotAllowed?d:(console.error(d),new Error(l.ErrorMessagesForJobOffersController.problemStoringJobOffers));case 4:return[2]}}))}))},e.prototype._updateStatus=function(){return s(this,void 0,void 0,(function(){var e,r,t,s;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.id,t=e.status,n.label=1;case 1:if(n.trys.push([1,3,,4]),!u.STATUS_NAMES.includes(t))throw new Error(l.GeneralErrorMessages.statusNotAllowed);return[4,u.JobOffersModel.findByIdAndUpdate(r,{status:t},{new:!0})];case 2:return[2,n.sent()];case 3:throw s=n.sent(),console.error(s),new Error(l.GeneralErrorMessages.problemUpdatingStatus);case 4:return[2]}}))}))},e}();r.JobOffers=c},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATUS_NAMES=r.JobOffersModel=void 0;var s=t(0),n=t(4),o=["published","inEvaluation","rePublished","completed","canceled"];r.STATUS_NAMES=o;var a=new s.Schema({name:{required:!0,type:String},quantity:{required:!0,type:Number},remuneration:{required:!0,type:Number}}),i=new s.Schema({idProject:{ref:"projects",required:!0,type:s.Schema.Types.ObjectId},occupations:{required:!0,type:[String]},roles:{required:!0,type:[a]}},{timestamps:{createdAt:!0,updatedAt:!0}}),u=n.extendSchema(i,o),l=s.model("jobOffers",u);r.JobOffersModel=l},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Information=void 0;var s=new(t(0).Schema)({content:{required:!0,type:String},title:{required:!0,type:String}});r.Information=s},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Projects=void 0;var a=t(1),i=t(2),u=t(18),l=a.Router();r.Projects=l,l.route("/projects/:idCompany/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,s,n,a,l,c,f;return o(this,(function(o){switch(o.label){case 0:if(t=e.params.idCompany,s=e.query,0!==Object.keys(s).length)return[3,5];l=s.status,n=new u.Projects({idCompany:t,status:l}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.process("getAllByStatus")];case 2:return a=o.sent(),i.response(!1,{result:a},r,200),[3,4];case 3:return c=o.sent(),i.response(!0,{message:c.message},r,500),[3,4];case 4:return[3,9];case 5:n=new u.Projects({idCompany:t}),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,n.process("getAllByCompany")];case 7:return a=o.sent(),i.response(!1,{result:a},r,200),[3,9];case 8:return f=o.sent(),i.response(!0,{message:f.message},r,500),[3,9];case 9:return[2]}}))}))})).post((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,a,l,c;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,n=e.params.idCompany,a=new u.Projects(s(s({},t),{idCompany:n})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.process("store")];case 2:return l=o.sent(),i.response(!1,{result:l},r,200),[3,4];case 3:return c=o.sent(),i.response(!0,{message:c.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/projects/:idProject/").patch((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,a,l,c,f,p,d;return o(this,(function(o){switch(o.label){case 0:if(t=e.body.args,n=e.params.idProject,(a=e.query)&&0!==Object.keys(a).length)return[3,5];l=new u.Projects(s(s({},t),{id:n})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,l.process("update")];case 2:return c=o.sent(),i.response(!1,{result:c},r,200),[3,4];case 3:return f=o.sent(),i.response(!0,{message:f.message},r,500),[3,4];case 4:return[3,9];case 5:p=a.status,l=new u.Projects({id:n,status:p}),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,l.process("updateStatus")];case 7:return c=o.sent(),i.response(!1,{result:c},r,200),[3,9];case 8:return d=o.sent(),i.response(!0,{message:d.message},r,500),[3,9];case 9:return[2]}}))}))}))},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Projects=void 0;var o=t(19),a=t(3),i=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"getAllByCompany":return this._getAllByCompany();case"getAllByStatus":return this._getAllByStatus();case"store":return this._store();case"update":return this._update();case"updateStatus":return this._updateStatus();default:return}},e.prototype._getAllByCompany=function(){return s(this,void 0,void 0,(function(){var e,r;return n(this,(function(t){switch(t.label){case 0:e=this._args.idCompany,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,o.ProjectsModel.find({idCompany:e})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(a.ErrorMessagesForProjectsController.problemGettingAllByCompany);case 4:return[2]}}))}))},e.prototype._getAllByStatus=function(){return s(this,void 0,void 0,(function(){var e,r,t,s;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.idCompany,t=e.status,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o.ProjectsModel.find({idCompany:r,status:t})];case 2:return[2,n.sent()];case 3:throw s=n.sent(),console.error(s),new Error(a.ErrorMessagesForProjectsController.problemGettingAllByStatus);case 4:return[2]}}))}))},e.prototype._store=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,i,u,l;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.code,t=e.deadline,s=e.description,i=e.idCompany,u=e.supervisor,n.label=1;case 1:if(n.trys.push([1,3,,4]),!r)throw new Error(a.GeneralErrorMessages.missingCode);if(!t)throw new Error(a.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(a.GeneralErrorMessages.invalidDate);if(!i)throw new Error(a.GeneralErrorMessages.missingIdCompany);if(!s)throw new Error(a.GeneralErrorMessages.missingDescription);if(!u)throw new Error(a.ErrorMessagesForProjectsController.missingSupervisor);return[4,new o.ProjectsModel({code:r,deadline:new Date(t),description:s,idCompany:i,status:"active",supervisor:u}).save()];case 2:return[2,n.sent()];case 3:throw(l=n.sent()).message===a.GeneralErrorMessages.missingCode||l.message===a.GeneralErrorMessages.missingDeadline||l.message===a.GeneralErrorMessages.invalidDate||l.message===a.GeneralErrorMessages.missingIdCompany||l.message===a.GeneralErrorMessages.missingDescription||l.message===a.ErrorMessagesForProjectsController.missingSupervisor?l:(console.error(l),new Error(a.ErrorMessagesForProjectsController.problemStoringProjects));case 4:return[2]}}))}))},e.prototype._update=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,i,u,l,c,f;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.code,t=e.deadline,s=e.description,i=e.id,u=e.idCompany,l=e.status,c=e.supervisor,n.label=1;case 1:if(n.trys.push([1,3,,4]),!r)throw new Error(a.GeneralErrorMessages.missingCode);if(!t)throw new Error(a.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(a.GeneralErrorMessages.invalidDate);if(!s)throw new Error(a.GeneralErrorMessages.missingDescription);if(!u)throw new Error(a.GeneralErrorMessages.missingIdCompany);if(!c)throw new Error(a.ErrorMessagesForProjectsController.missingSupervisor);if(!l)throw new Error(a.GeneralErrorMessages.missingStatus);if(!o.STATUS_NAMES.includes(l))throw new Error(a.GeneralErrorMessages.statusNotAllowed);return[4,o.ProjectsModel.findByIdAndUpdate(i,{code:r,deadline:new Date(t),description:s,id:i,idCompany:u,status:l,supervisor:c},{new:!0})];case 2:return[2,n.sent()];case 3:throw(f=n.sent()).message===a.GeneralErrorMessages.missingCode||f.message===a.GeneralErrorMessages.missingDeadline||f.message===a.GeneralErrorMessages.invalidDate||f.message===a.GeneralErrorMessages.missingDescription||f.message===a.GeneralErrorMessages.missingIdCompany||f.message===a.ErrorMessagesForProjectsController.missingSupervisor||f.message===a.GeneralErrorMessages.statusNotAllowed?f:(console.error(f),new Error(a.ErrorMessagesForProjectsController.problemUpdatingProjects));case 4:return[2]}}))}))},e.prototype._updateStatus=function(){return s(this,void 0,void 0,(function(){var e,r,t,s;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.id,t=e.status,n.label=1;case 1:if(n.trys.push([1,3,,4]),!o.STATUS_NAMES.includes(t))throw new Error(a.GeneralErrorMessages.statusNotAllowed);return[4,o.ProjectsModel.findByIdAndUpdate(r,{status:t},{new:!0})];case 2:return[2,n.sent()];case 3:throw s=n.sent(),console.error(s),new Error(a.GeneralErrorMessages.problemUpdatingStatus);case 4:return[2]}}))}))},e}();r.Projects=i},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATUS_NAMES=r.ProjectsModel=void 0;var s=t(0),n=t(4),o=["active","completed","canceled"];r.STATUS_NAMES=o;var a=new s.Schema({dni:{required:!0,type:String},lastNames:{required:!0,type:String},names:{required:!0,type:String}}),i=new s.Schema({idCompany:{required:!0,type:String},supervisor:{required:!0,type:[a]}}),u=n.extendSchema(i,o),l=s.model("projects",u);r.ProjectsModel=l},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Tasks=void 0;var a=t(1),i=t(2),u=t(21),l=a.Router();r.Tasks=l,l.route("/tasks/:idCompany/:idProject/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,s,n,a,l,c;return o(this,(function(o){switch(o.label){case 0:t=e.params,s=t.idCompany,n=t.idProject,a=new u.Tasks({idCompany:s,idProject:n}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.process("getAll")];case 2:return l=o.sent(),i.response(!1,{result:l},r,200),[3,4];case 3:return c=o.sent(),i.response(!0,{message:c.message},r,500),[3,4];case 4:return[2]}}))}))})).post((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,a,l,c,f,p;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,n=e.params,a=n.idCompany,l=n.idProject,c=new u.Tasks(s(s({},t),{idCompany:a,idProject:l})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,c.process("store")];case 2:return f=o.sent(),i.response(!1,{result:f},r,200),[3,4];case 3:return p=o.sent(),i.response(!0,{message:p.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/tasks/:idProject/:idTask/").patch((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,a,l,c,f,p,d,h,g;return o(this,(function(o){switch(o.label){case 0:if(t=e.body.args,n=e.params,a=n.idProject,l=n.idTask,c=e.query,0!==Object.keys(c).length)return[3,5];f=new u.Tasks(s(s({},t),{id:l,idProject:a})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,f.process("update")];case 2:return p=o.sent(),i.response(!1,{result:p},r,200),[3,4];case 3:return d=o.sent(),i.response(!0,{message:d.message},r,500),[3,4];case 4:return[3,9];case 5:h=c.status,f=new u.Tasks({id:l,status:h}),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,f.process("updateStatus")];case 7:return p=o.sent(),i.response(!1,{result:p},r,200),[3,9];case 8:return g=o.sent(),i.response(!0,{message:g.message},r,500),[3,9];case 9:return[2]}}))}))})),l.route("/task/:idTask/").delete((function(e,r){return n(void 0,void 0,void 0,(function(){var t,s,n,a;return o(this,(function(o){switch(o.label){case 0:t=e.params.idTask,s=new u.Tasks({id:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.process("deleteOne")];case 2:return n=o.sent(),i.response(!1,{result:n},r,200),[3,4];case 3:return a=o.sent(),i.response(!0,{message:a.message},r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Tasks=void 0;var o=t(0),a=t(22),i=t(3),u=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"deleteOne":return this._deleteOne();case"getAll":return this._getAll();case"store":return this._store();case"update":return this._update();case"updateStatus":return this._updateStatus();default:return}},e.prototype._deleteOne=function(){return s(this,void 0,void 0,(function(){var e,r;return n(this,(function(t){switch(t.label){case 0:e=this._args.id,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.TasksModel.findByIdAndDelete(e)];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(i.ErrorMessagesForTasksController.problemDeletingTasks);case 4:return[2]}}))}))},e.prototype._getAll=function(){return s(this,void 0,void 0,(function(){var e,r;return n(this,(function(t){switch(t.label){case 0:e=this._args.idProject,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.TasksModel.find({idProject:new o.Schema.Types.ObjectId(e)})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(i.ErrorMessagesForTasksController.problemGettingAll);case 4:return[2]}}))}))},e.prototype._store=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,o,u,l,c;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.idProject,t=e.deadline,s=e.description,o=e.responsible,u=e.status,l=e.subTasks,n.label=1;case 1:if(n.trys.push([1,3,,4]),!r)throw new Error(i.GeneralErrorMessages.missingIdProject);if(!t)throw new Error(i.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(i.GeneralErrorMessages.invalidDate);if(!s)throw new Error(i.GeneralErrorMessages.missingDescription);if(!o)throw new Error(i.ErrorMessagesForTasksController.missingResponsible);if(!u)throw new Error(i.GeneralErrorMessages.missingStatus);if(!l)throw new Error(i.ErrorMessagesForTasksController.missingSubTasks);return void 0,[4,(l&&l.length>0?new a.TasksModel({deadline:new Date(t),description:s,idProject:r,responsible:o,responsibleNumber:o.length,status:u,subTasks:l}):new a.TasksModel({deadline:new Date(t),description:s,idProject:r,responsible:o,responsibleNumber:o.length,status:u})).save()];case 2:return[2,n.sent()];case 3:throw(c=n.sent()).message===i.GeneralErrorMessages.missingIdProject||c.message===i.GeneralErrorMessages.missingDeadline||c.message===i.GeneralErrorMessages.invalidDate||c.message===i.GeneralErrorMessages.missingDescription||c.message===i.ErrorMessagesForTasksController.missingResponsible||c.message===i.GeneralErrorMessages.missingStatus||c.message===i.ErrorMessagesForTasksController.missingSubTasks?c:(console.error(c),new Error(i.ErrorMessagesForTasksController.problemStoringTasks));case 4:return[2]}}))}))},e.prototype._update=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,o,u,l,c,f;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.id,t=e.deadline,s=e.description,o=e.responsible,u=e.status,l=e.subTasks,n.label=1;case 1:if(n.trys.push([1,6,,7]),!t)throw new Error(i.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(i.GeneralErrorMessages.invalidDate);if(!s)throw new Error(i.GeneralErrorMessages.missingDescription);if(!o)throw new Error(i.ErrorMessagesForTasksController.missingResponsible);if(!u)throw new Error(i.GeneralErrorMessages.missingStatus);if(!l)throw new Error(i.ErrorMessagesForTasksController.missingSubTasks);return c=void 0,l.length>0?[4,a.TasksModel.findByIdAndUpdate(r,{deadline:new Date(t),description:s,responsible:o,status:u,subTasks:l},{new:!0})]:[3,3];case 2:return c=n.sent(),[3,5];case 3:return[4,a.TasksModel.findByIdAndUpdate(r,{deadline:new Date(t),description:s,responsible:o,status:u},{new:!0})];case 4:c=n.sent(),n.label=5;case 5:return[2,c];case 6:throw(f=n.sent()).message===i.GeneralErrorMessages.missingDeadline||f.message===i.GeneralErrorMessages.invalidDate||f.message===i.GeneralErrorMessages.missingDescription||f.message===i.ErrorMessagesForTasksController.missingResponsible||f.message===i.GeneralErrorMessages.missingStatus||f.message===i.ErrorMessagesForTasksController.missingSubTasks?f:(console.error(f),new Error(i.ErrorMessagesForTasksController.problemStoringTasks));case 7:return[2]}}))}))},e.prototype._updateStatus=function(){return s(this,void 0,void 0,(function(){var e,r,t,s;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.id,t=e.status,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,a.TasksModel.findByIdAndUpdate(r,{status:t})];case 2:return[2,n.sent()];case 3:throw s=n.sent(),console.error(s),s;case 4:return[2]}}))}))},e}();r.Tasks=u},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TasksModel=void 0;var s=t(0),n=t(23),o=new s.Schema({idProject:{ref:"projects",required:!0,type:s.Schema.Types.ObjectId},responsible:{required:!0,type:[String]},responsibleNumber:{required:!0,type:Number},subTasks:[String]}),a=n.extendSchema(o),i=s.model("tasks",a);r.TasksModel=i},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.extendSchema=void 0;var n=t(0),o=t(5);r.extendSchema=function(e){return new n.Schema(s(s({},o.CommonDataForProjectsTasksAndJobOffers.obj),e.obj))}},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.mongoConnection=void 0;var i=a(t(0)),u=i.default.connection,l={keepAlive:!0,useCreateIndex:!0,useFindAndModify:!1,useNewUrlParser:!0,useUnifiedTopology:!0};u.on("connected",(function(){console.log("Mongo connection established.")})),u.on("reconnected",(function(){console.log("Mongo connection reestablished.")})),u.on("disconnected",(function(){console.log("Mongo connection disconnected."),console.log("Trying to reconnected to Mongo..."),setTimeout((function(){i.default.connect(process.env.MONGO_URI,s(s({},l),{connectTimeoutMS:3e3,socketTimeoutMS:3e3}))}),3e3)})),u.on("close",(function(){console.log("Mongo connection closed.")})),u.on("error",(function(e){console.log("Mongo connection error:"),console.error(e)}));r.mongoConnection=function(){return n(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.default.connect(process.env.MONGO_URI,l)];case 1:return e.sent(),[2]}}))}))}},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(n,o){function a(e){try{u(s.next(e))}catch(e){o(e)}}function i(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(e,a)}catch(e){o=[6,e],s=0}finally{t=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.mysqlConnection=void 0;var a=o(t(26)),i={client:"mysql",connection:{database:process.env.MYSQL_DATABASE,host:process.env.MYSQL_HOST,password:process.env.MYSQL_PASS,user:process.env.MYSQL_USER}};r.mysqlConnection=function(){return s(void 0,void 0,void 0,(function(){var e;return n(this,(function(r){switch(r.label){case 0:global.mysqlDatabase=a.default(i),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,global.mysqlDatabase.raw("SELECT 'test connection';")];case 2:return r.sent(),console.log("MySql connection established."),[3,4];case 3:return e=r.sent(),console.error(e),[3,4];case 4:return[2]}}))}))}},function(e,r){e.exports=require("knex")}]);