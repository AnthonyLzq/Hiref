!function(e){var r={};function t(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)t.d(n,s,function(r){return e[r]}.bind(null,s));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/dist/",t(t.s=7)}([function(e,r){e.exports=require("mongoose")},function(e,r){e.exports=require("express")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.response=void 0;r.response=function(e,r,t,n){t.status(n).send({error:e,message:r})}},function(e,r,t){"use strict";var n,s,o,i,a;Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorMessagesForTasksController=r.ErrorMessagesForProjectsController=r.ErrorMessagesForJobOffersController=r.ErrorMessagesForJobsController=r.GeneralErrorMessages=void 0,function(e){e.invalidDate="Invalid Date",e.missingCode="Code must be provided.",e.missingDeadline="Deadline must be provided.",e.missingDescription="Description must be provided.",e.missingIdCompany="Id Company must be provided.",e.missingIdProject="Id project must be provided.",e.missingStatus="Status must be provided.",e.problemUpdatingStatus="There was a problem trying to update the status.",e.statusNotAllowed="That status is not allowed."}(n||(n={})),r.GeneralErrorMessages=n,function(e){e.problemGettingAll="There was a problem getting all the jobs."}(s||(s={})),r.ErrorMessagesForJobsController=s,function(e){e.missingApplicants="Applicants must be provided.",e.missingOccupations="Occupations must be provided.",e.missingRoles="Roles must be provided.",e.problemAllowingTheUserPostulate="There was a problem trying to allow the postulation.",e.problemDeletingJobOffer="There was a problem deleting the job offer",e.problemGettingAll="There was a problem getting all the job offers",e.problemGettingAllByOccupations="There was a problem getting all the job offers for the requested project.",e.problemGettingAllByProject="There was a problem getting all the job offers for the requested project.",e.problemGettingAllForAspirant="There was a problem getting all the job offers for the requested aspirant.",e.problemGettingAllForEvaluator="There was a problem getting all the job offers for the requested aspirant.",e.problemStoringJobOffers="There was a problem trying to store the requested job offer."}(o||(o={})),r.ErrorMessagesForJobOffersController=o,function(e){e.missingSupervisor="Supervisor(s) must be provided.",e.problemGettingAllByCompany="There was a problem getting all the projects from the requested company.",e.problemGettingAllByStatus="There was a problem getting all the projects from the requested company int he requested status.",e.problemStoringProjects="There was a problem trying to store the project.",e.problemUpdatingProjects="There was a problem trying to update the project."}(i||(i={})),r.ErrorMessagesForProjectsController=i,function(e){e.missingResponsible="Responsible must be provided.",e.missingSubTasks="Sub tasks must be provided.",e.problemDeletingTasks="There was a problem deleting the task.",e.problemGettingAll="There was a problem getting all the tasks.",e.problemStoringTasks="There was a problem trying to store the task.",e.problemUpdatingTasks="There was a problem trying to update the task."}(a||(a={})),r.ErrorMessagesForTasksController=a},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.extendSchema=void 0;var s=t(0),o=t(5);r.extendSchema=function(e,r){var t=new s.Schema(n(n({},o.CommonDataForProjectsTasksAndJobOffers.obj),{status:{enum:r,required:!0,type:String}}));return new s.Schema(n(n({},e.obj),t.obj))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CommonDataForProjectsTasksAndJobOffers=void 0;var n=t(0),s=t(6),o=new n.Schema({code:{required:!1,type:String,unique:!0},deadline:{required:!0,type:Date},description:{required:!0,type:s.Information}},{timestamps:{createdAt:!0,updatedAt:!0}});r.CommonDataForProjectsTasksAndJobOffers=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Information=void 0;var n=new(t(0).Schema)({content:{required:!0,type:String},title:{required:!0,type:String}},{_id:!1});r.Information=n},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t(8).Server.start()},function(e,r,t){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Server=void 0;var s=n(t(1)),o=n(t(9)),i=t(10),a=t(27),u=t(31),l=t(32),c=new(function(){function e(){this.app=s.default(),this._config()}return e.prototype._config=function(){this.app.set("port",process.env.PORT||"3000"),this.app.use(o.default("dev")),this.app.use(s.default.json()),this.app.use(s.default.urlencoded({extended:!1})),this.app.use((function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Headers","Authorization, Content-Type"),t()})),i.applyRoutes(this.app)},e.prototype._firebase=function(){this._firebaseConnection=a.firebaseConnection,this._firebaseConnection()},e.prototype._mongo=function(){this._mongoConnection=u.mongoConnection,this._mongoConnection()},e.prototype._mysql=function(){this._mysqlConnection=l.mysqlConnection,this._mysqlConnection()},e.prototype.start=function(){var e=this;this.app.listen(this.app.get("port"),(function(){return console.log("Server running at port "+e.app.get("port")+".")}));try{this._firebase(),this._mongo(),this._mysql()}catch(e){console.error(e)}},e}());r.Server=c},function(e,r){e.exports=require("morgan")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyRoutes=void 0;var n=t(11),s=[n.JobOffers,n.Jobs,n.Projects,n.Tasks,n.Users];r.applyRoutes=function(e){e.use("/",n.Home),s.forEach((function(r){return e.use("/api",r)}))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Users=r.Tasks=r.Projects=r.JobOffers=r.Jobs=r.Home=void 0;var n=t(12);Object.defineProperty(r,"Home",{enumerable:!0,get:function(){return n.Home}});var s=t(13);Object.defineProperty(r,"Jobs",{enumerable:!0,get:function(){return s.Jobs}});var o=t(15);Object.defineProperty(r,"JobOffers",{enumerable:!0,get:function(){return o.JobOffers}});var i=t(18);Object.defineProperty(r,"Projects",{enumerable:!0,get:function(){return i.Projects}});var a=t(21);Object.defineProperty(r,"Tasks",{enumerable:!0,get:function(){return a.Tasks}});var u=t(25);Object.defineProperty(r,"Users",{enumerable:!0,get:function(){return u.Users}})},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Home=void 0;var n=t(1),s=t(2),o=n.Router();r.Home=o,o.route("").get((function(e,r){s.response(!1,"Welcome to Hiref's backend!",r,200)}))},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Jobs=void 0;var o=t(1),i=t(2),a=t(14),u=o.Router();r.Jobs=u,u.route("/jobs/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var e,t,n;return s(this,(function(s){switch(s.label){case 0:e=new a.Jobs,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.process("getAll")];case 2:return t=s.sent(),i.response(!1,{result:t},r,200),[3,4];case 3:return n=s.sent(),i.response(!0,n.message,r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Jobs=void 0;var o=t(3),i=function(){function e(){this._allJobs=[]}return e.prototype.process=function(e){switch(e){case"getAll":return this._getAll();default:return}},e.prototype._getAll=function(){return n(this,void 0,void 0,(function(){var e,r,t,n=this;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,global.mysqlDatabase.select("id_jobfamily as id","description as jobFamilyName").from("jobfamily")];case 1:return e=s.sent(),[4,global.mysqlDatabase.select("j.id_jobfamily as jobFamilyId","o.id_ocupation as occupationId","o.description as occupation").from({j:"jobfamily"}).innerJoin({o:"ocupation"},"j.id_jobfamily","=","o.idfk_jobfamily")];case 2:return r=s.sent(),e.forEach((function(e){var t=[];r.forEach((function(r){r.jobFamilyId===e.id&&t.push({occupationId:r.occupationId,occupationName:r.occupation})})),n._allJobs.push({jobFamily:e,occupations:t})})),[2,this._allJobs];case 3:throw t=s.sent(),console.error(t),new Error(o.ErrorMessagesForJobsController.problemGettingAll);case 4:return[2]}}))}))},e}();r.Jobs=i},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.JobOffers=void 0;var i=t(1),a=t(2),u=t(16),l=i.Router();r.JobOffers=l,l.route("/jobOffers/").get((function(e,r){return s(void 0,void 0,void 0,(function(){var e,t,n;return o(this,(function(s){switch(s.label){case 0:e=new u.JobOffers,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.process("getAll")];case 2:return t=s.sent(),a.response(!1,{result:t},r,200),[3,4];case 3:return n=s.sent(),a.response(!0,n.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/store/:idProject/").post((function(e,r){return s(void 0,void 0,void 0,(function(){var t,s,i,l,c;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,s=e.params.idProject,i=new u.JobOffers(n(n({},t),{idProject:s})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.process("store")];case 2:return l=o.sent(),a.response(!1,{result:l},r,200),[3,4];case 3:return c=o.sent(),a.response(!0,c.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/update/:idJobOffer/").patch((function(e,r){return s(void 0,void 0,void 0,(function(){var t,s,i,l,c,f,p,d;return o(this,(function(o){switch(o.label){case 0:if(t=e.body.args,s=e.params.idJobOffer,(i=e.query)&&0!==Object.keys(i).length)return[3,5];l=new u.JobOffers(n(n({},t),{id:s})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,l.process("update")];case 2:return c=o.sent(),a.response(!1,{result:c},r,200),[3,4];case 3:return f=o.sent(),a.response(!0,f.message,r,500),[3,4];case 4:return[3,9];case 5:p=i.status,l=new u.JobOffers({id:s,status:p}),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,l.process("updateStatus")];case 7:return c=o.sent(),a.response(!1,{result:c},r,200),[3,9];case 8:return d=o.sent(),a.response(!0,d.message,r,500),[3,9];case 9:return[2]}}))}))})),l.route("/jobOffers/getAll/byProject/:idProject/").get((function(e,r){return s(void 0,void 0,void 0,(function(){var t,n,s,i;return o(this,(function(o){switch(o.label){case 0:t=e.params.idProject,n=new u.JobOffers({idProject:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.process("getAllByProject")];case 2:return s=o.sent(),a.response(!1,{result:s},r,200),[3,4];case 3:return i=o.sent(),a.response(!0,i.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/getAll/byOccupations/").post((function(e,r){return s(void 0,void 0,void 0,(function(){var t,n,s,i;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,n=new u.JobOffers(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.process("getAllByOccupations")];case 2:return s=o.sent(),a.response(!1,{result:s},r,200),[3,4];case 3:return i=o.sent(),a.response(!0,i.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/getAll/forAspirant/").post((function(e,r){return s(void 0,void 0,void 0,(function(){var t,n,s,i;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,n=new u.JobOffers(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.process("getAllForAspirant")];case 2:return s=o.sent(),a.response(!1,{result:s},r,200),[3,4];case 3:return i=o.sent(),a.response(!0,i.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/getAll/forEvaluator/").post((function(e,r){return s(void 0,void 0,void 0,(function(){var t,n,s,i;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,n=new u.JobOffers(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.process("getAllForEvaluator")];case 2:return s=o.sent(),a.response(!1,{result:s},r,200),[3,4];case 3:return i=o.sent(),a.response(!0,i.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/delete/:idJobOffer/").delete((function(e,r){return s(void 0,void 0,void 0,(function(){var t,n,s,i;return o(this,(function(o){switch(o.label){case 0:t=e.params.idJobOffer,n=new u.JobOffers({id:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.process("deleteOne")];case 2:return s=o.sent(),a.response(!1,{result:s},r,200),[3,4];case 3:return i=o.sent(),a.response(!0,i.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/jobOffers/postulate/:idJobOffer/").post((function(e,r){return s(void 0,void 0,void 0,(function(){var t,s,i,l,c;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,s=e.params.idJobOffer,i=new u.JobOffers(n(n({},t),{id:s})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.process("postulation")];case 2:return l=o.sent(),a.response(!1,{result:l},r,200),[3,4];case 3:return c=o.sent(),a.response(!0,c.message,r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,s,o=t.call(e),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(s)throw s.error}}return i},i=this&&this.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(o(arguments[r]));return e};Object.defineProperty(r,"__esModule",{value:!0}),r.JobOffers=void 0;var a=t(0),u=t(17),l=t(3),c=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"deleteOne":return this._deleteOne();case"getAll":return this._getAll();case"getAllByProject":return this._getAllByProject();case"getAllByOccupations":return this._getAllByOccupations();case"getAllForAspirant":return this._getAllForAspirant();case"getAllForEvaluator":return this._getAllForEvaluator();case"postulation":return this._postulation();case"store":return this._store();case"update":return this._update();case"updateStatus":return this._updateStatus();default:return}},e.prototype._deleteOne=function(){return n(this,void 0,void 0,(function(){var e,r;return s(this,(function(t){switch(t.label){case 0:e=this._args.id,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.JobOffersModel.findByIdAndDelete(e)];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(l.ErrorMessagesForJobOffersController.problemDeletingJobOffer);case 4:return[2]}}))}))},e.prototype._getAll=function(){return n(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,u.JobOffersModel.find({$or:[{status:"published"},{status:"rePublished"}]})];case 1:return[2,r.sent()];case 2:throw e=r.sent(),console.error(e),new Error(l.ErrorMessagesForJobOffersController.problemGettingAll);case 3:return[2]}}))}))},e.prototype._getAllByProject=function(){return n(this,void 0,void 0,(function(){var e,r;return s(this,(function(t){switch(t.label){case 0:e=this._args.idProject,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.JobOffersModel.find({idProject:new a.Types.ObjectId(e)})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(l.ErrorMessagesForJobOffersController.problemGettingAllByProject);case 4:return[2]}}))}))},e.prototype._getAllByOccupations=function(){return n(this,void 0,void 0,(function(){var e,r;return s(this,(function(t){switch(t.label){case 0:e=this._args.occupations,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.JobOffersModel.find({occupations:{$in:e}})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(l.ErrorMessagesForJobOffersController.problemGettingAllByOccupations);case 4:return[2]}}))}))},e.prototype._getAllForAspirant=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,o,c,f,p,d;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.accepted,t=e.occupations,n=e.rejected,o=r.map((function(e){return new a.Types.ObjectId(e)})),c=n.map((function(e){return new a.Types.ObjectId(e)})),f=i(o,c),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all([u.JobOffersModel.find({_id:{$nin:f},occupations:{$in:t}}),u.JobOffersModel.find({_id:{$in:o},occupations:{$in:t}}),u.JobOffersModel.find({_id:{$in:c},occupations:{$in:t}})])];case 2:return[2,{acceptedJobOffers:(p=s.sent())[1],availableJobOffers:p[0],rejectedJobOffers:p[2]}];case 3:throw d=s.sent(),console.error(d),new Error(l.ErrorMessagesForJobOffersController.problemGettingAllForAspirant);case 4:return[2]}}))}))},e.prototype._getAllForEvaluator=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,o,c,f,p;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.completed,t=e.inEvaluation,n=r.map((function(e){return new a.Types.ObjectId(e)})),o=t.map((function(e){return new a.Types.ObjectId(e)})),c=i(n,o),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all([u.JobOffersModel.find({_id:{$in:c}}),u.JobOffersModel.find({_id:{$in:t}}),u.JobOffersModel.find({_id:{$in:n}})])];case 2:return[2,{availableJobOffers:(f=s.sent())[0],completedJobOffers:f[2],inEvaluationJobOffers:f[1]}];case 3:throw p=s.sent(),console.error(p),new Error(l.ErrorMessagesForJobOffersController.problemGettingAllForEvaluator);case 4:return[2]}}))}))},e.prototype._store=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,o,i,a,c;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.code,t=e.deadline,n=e.description,o=e.idProject,i=e.occupations,a=e.roles,s.label=1;case 1:if(s.trys.push([1,3,,4]),!r)throw new Error(l.GeneralErrorMessages.missingCode);if(!t)throw new Error(l.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(l.GeneralErrorMessages.invalidDate);if(!n)throw new Error(l.GeneralErrorMessages.missingDescription);if(!o)throw new Error(l.GeneralErrorMessages.missingIdProject);if(!i)throw new Error(l.ErrorMessagesForJobOffersController.missingOccupations);if(!a)throw new Error(l.ErrorMessagesForJobOffersController.missingRoles);return[4,new u.JobOffersModel({code:r,deadline:new Date(t),description:n,idProject:o,numberApplicants:0,occupations:i,roles:a,status:"published"}).save()];case 2:return[2,s.sent()];case 3:throw(c=s.sent()).message===l.GeneralErrorMessages.missingCode||c.message===l.GeneralErrorMessages.missingDeadline||c.message===l.GeneralErrorMessages.invalidDate||c.message===l.GeneralErrorMessages.missingDescription||c.message===l.GeneralErrorMessages.missingDescription||c.message===l.GeneralErrorMessages.missingIdProject||c.message===l.ErrorMessagesForJobOffersController.missingOccupations||c.message===l.ErrorMessagesForJobOffersController.missingRoles||c.message===l.GeneralErrorMessages.statusNotAllowed?c:(console.error(c),new Error(l.ErrorMessagesForJobOffersController.problemStoringJobOffers));case 4:return[2]}}))}))},e.prototype._postulation=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,o,i;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.id,t=e.roles,s.label=1;case 1:if(s.trys.push([1,3,,4]),!t)throw new Error(l.ErrorMessagesForJobOffersController.missingRoles);return n=t[0].applicants[0],o=t[0].description.title,[4,u.JobOffersModel.findByIdAndUpdate(r,{$addToSet:{"roles.$[r].applicants":n},$inc:{numberApplicants:1}},{arrayFilters:[{"r.description.title":o}],new:!0})];case 2:return[2,s.sent()];case 3:throw(i=s.sent()).message===l.ErrorMessagesForJobOffersController.missingApplicants?i:(console.error(i),new Error(l.ErrorMessagesForJobOffersController.problemAllowingTheUserPostulate));case 4:return[2]}}))}))},e.prototype._update=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,o,i,a,c,f;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.code,t=e.deadline,n=e.description,o=e.id,i=e.occupations,a=e.roles,c=e.status,s.label=1;case 1:if(s.trys.push([1,3,,4]),!r)throw new Error(l.GeneralErrorMessages.missingCode);if(!t)throw new Error(l.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(l.GeneralErrorMessages.invalidDate);if(!n)throw new Error(l.GeneralErrorMessages.missingDescription);if(!i)throw new Error(l.ErrorMessagesForJobOffersController.missingOccupations);if(!a)throw new Error(l.ErrorMessagesForJobOffersController.missingRoles);if(!c)throw new Error(l.GeneralErrorMessages.missingStatus);if(!u.STATUS_NAMES.includes(c))throw new Error(l.GeneralErrorMessages.statusNotAllowed);return[4,u.JobOffersModel.findByIdAndUpdate(o,{code:r,deadline:new Date(t),description:n,occupations:i,roles:a,status:c},{new:!0})];case 2:return[2,s.sent()];case 3:throw(f=s.sent()).message===l.GeneralErrorMessages.missingCode||f.message===l.GeneralErrorMessages.missingDeadline||f.message===l.GeneralErrorMessages.invalidDate||f.message===l.GeneralErrorMessages.missingDescription||f.message===l.GeneralErrorMessages.missingDescription||f.message===l.ErrorMessagesForJobOffersController.missingOccupations||f.message===l.ErrorMessagesForJobOffersController.missingRoles||f.message===l.GeneralErrorMessages.missingStatus||f.message===l.GeneralErrorMessages.statusNotAllowed?f:(console.error(f),new Error(l.ErrorMessagesForJobOffersController.problemStoringJobOffers));case 4:return[2]}}))}))},e.prototype._updateStatus=function(){return n(this,void 0,void 0,(function(){var e,r,t,n;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.id,t=e.status,s.label=1;case 1:if(s.trys.push([1,3,,4]),!u.STATUS_NAMES.includes(t))throw new Error(l.GeneralErrorMessages.statusNotAllowed);return[4,u.JobOffersModel.findByIdAndUpdate(r,{status:t},{new:!0})];case 2:return[2,s.sent()];case 3:throw n=s.sent(),console.error(n),new Error(l.GeneralErrorMessages.problemUpdatingStatus);case 4:return[2]}}))}))},e}();r.JobOffers=c},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATUS_NAMES=r.JobOffersModel=void 0;var n=t(0),s=t(4),o=t(6),i=["published","inEvaluation","rePublished","completed","canceled"];r.STATUS_NAMES=i;var a=new n.Schema({applicants:{required:!1,type:[String]},description:{required:!0,type:o.Information},quantity:{required:!0,type:Number},remuneration:{required:!0,type:Number}},{_id:!1}),u=new n.Schema({idProject:{ref:"projects",required:!0,type:n.Schema.Types.ObjectId},numberApplicants:{required:!0,type:Number},occupations:{required:!0,type:[String]},roles:{required:!0,type:[a]}}),l=s.extendSchema(u,i),c=n.model("jobOffers",l);r.JobOffersModel=c},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Projects=void 0;var i=t(1),a=t(2),u=t(19),l=i.Router();r.Projects=l,l.route("/projects/:idCompany/").get((function(e,r){return s(void 0,void 0,void 0,(function(){var t,n,s,i,l,c,f;return o(this,(function(o){switch(o.label){case 0:if(t=e.params.idCompany,(n=e.query)&&0!==Object.keys(n).length)return[3,5];s=new u.Projects({idCompany:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.process("getAllByCompany")];case 2:return i=o.sent(),a.response(!1,{result:i},r,200),[3,4];case 3:return l=o.sent(),a.response(!0,l.message,r,500),[3,4];case 4:return[3,9];case 5:c=n.status,s=new u.Projects({idCompany:t,status:c}),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,s.process("getAllByStatus")];case 7:return i=o.sent(),a.response(!1,{result:i},r,200),[3,9];case 8:return f=o.sent(),a.response(!0,f.message,r,500),[3,9];case 9:return[2]}}))}))})).post((function(e,r){return s(void 0,void 0,void 0,(function(){var t,s,i,l,c;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,s=e.params.idCompany,i=new u.Projects(n(n({},t),{idCompany:s})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.process("store")];case 2:return l=o.sent(),a.response(!1,{result:l},r,200),[3,4];case 3:return c=o.sent(),a.response(!0,c.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/projects/update/:idProject/").patch((function(e,r){return s(void 0,void 0,void 0,(function(){var t,s,i,l,c,f,p,d;return o(this,(function(o){switch(o.label){case 0:if(t=e.body.args,s=e.params.idProject,(i=e.query)&&0!==Object.keys(i).length)return[3,5];l=new u.Projects(n(n({},t),{id:s})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,l.process("update")];case 2:return c=o.sent(),a.response(!1,{result:c},r,200),[3,4];case 3:return f=o.sent(),a.response(!0,f.message,r,500),[3,4];case 4:return[3,9];case 5:p=i.status,l=new u.Projects({id:s,status:p}),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,l.process("updateStatus")];case 7:return c=o.sent(),a.response(!1,{result:c},r,200),[3,9];case 8:return d=o.sent(),a.response(!0,d.message,r,500),[3,9];case 9:return[2]}}))}))}))},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Projects=void 0;var o=t(20),i=t(3),a=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"getAllByCompany":return this._getAllByCompany();case"getAllByStatus":return this._getAllByStatus();case"store":return this._store();case"update":return this._update();case"updateStatus":return this._updateStatus();default:return}},e.prototype._getAllByCompany=function(){return n(this,void 0,void 0,(function(){var e,r;return s(this,(function(t){switch(t.label){case 0:e=this._args.idCompany,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,o.ProjectsModel.find({idCompany:e})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(i.ErrorMessagesForProjectsController.problemGettingAllByCompany);case 4:return[2]}}))}))},e.prototype._getAllByStatus=function(){return n(this,void 0,void 0,(function(){var e,r,t,n;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.idCompany,t=e.status,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.ProjectsModel.find({idCompany:r,status:t})];case 2:return[2,s.sent()];case 3:throw n=s.sent(),console.error(n),new Error(i.ErrorMessagesForProjectsController.problemGettingAllByStatus);case 4:return[2]}}))}))},e.prototype._store=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,a,u,l;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.code,t=e.deadline,n=e.description,a=e.idCompany,u=e.supervisors,s.label=1;case 1:if(s.trys.push([1,3,,4]),!r)throw new Error(i.GeneralErrorMessages.missingCode);if(!t)throw new Error(i.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(i.GeneralErrorMessages.invalidDate);if(!a)throw new Error(i.GeneralErrorMessages.missingIdCompany);if(!n)throw new Error(i.GeneralErrorMessages.missingDescription);if(!u)throw new Error(i.ErrorMessagesForProjectsController.missingSupervisor);return[4,new o.ProjectsModel({code:r,deadline:new Date(t),description:n,idCompany:a,status:"active",supervisors:u}).save()];case 2:return[2,s.sent()];case 3:throw(l=s.sent()).message===i.GeneralErrorMessages.missingCode||l.message===i.GeneralErrorMessages.missingDeadline||l.message===i.GeneralErrorMessages.invalidDate||l.message===i.GeneralErrorMessages.missingIdCompany||l.message===i.GeneralErrorMessages.missingDescription||l.message===i.ErrorMessagesForProjectsController.missingSupervisor?l:(console.error(l),new Error(i.ErrorMessagesForProjectsController.problemStoringProjects));case 4:return[2]}}))}))},e.prototype._update=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,a,u,l,c;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.code,t=e.deadline,n=e.description,a=e.id,u=e.status,l=e.supervisors,s.label=1;case 1:if(s.trys.push([1,3,,4]),!r)throw new Error(i.GeneralErrorMessages.missingCode);if(!t)throw new Error(i.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(i.GeneralErrorMessages.invalidDate);if(!n)throw new Error(i.GeneralErrorMessages.missingDescription);if(!l)throw new Error(i.ErrorMessagesForProjectsController.missingSupervisor);if(!u)throw new Error(i.GeneralErrorMessages.missingStatus);if(!o.STATUS_NAMES.includes(u))throw new Error(i.GeneralErrorMessages.statusNotAllowed);return[4,o.ProjectsModel.findByIdAndUpdate(a,{code:r,deadline:new Date(t),description:n,id:a,status:u,supervisors:l},{new:!0})];case 2:return[2,s.sent()];case 3:throw(c=s.sent()).message===i.GeneralErrorMessages.missingCode||c.message===i.GeneralErrorMessages.missingDeadline||c.message===i.GeneralErrorMessages.invalidDate||c.message===i.GeneralErrorMessages.missingDescription||c.message===i.ErrorMessagesForProjectsController.missingSupervisor||c.message===i.GeneralErrorMessages.statusNotAllowed?c:(console.error(c),new Error(i.ErrorMessagesForProjectsController.problemUpdatingProjects));case 4:return[2]}}))}))},e.prototype._updateStatus=function(){return n(this,void 0,void 0,(function(){var e,r,t,n;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.id,t=e.status,s.label=1;case 1:if(s.trys.push([1,3,,4]),!o.STATUS_NAMES.includes(t))throw new Error(i.GeneralErrorMessages.statusNotAllowed);return[4,o.ProjectsModel.findByIdAndUpdate(r,{status:t},{new:!0})];case 2:return[2,s.sent()];case 3:throw n=s.sent(),console.error(n),new Error(i.GeneralErrorMessages.problemUpdatingStatus);case 4:return[2]}}))}))},e}();r.Projects=a},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATUS_NAMES=r.ProjectsModel=void 0;var n=t(0),s=t(4),o=["active","completed","canceled"];r.STATUS_NAMES=o;var i=new n.Schema({idCompany:{required:!0,type:String},supervisors:{required:!0,type:[String]}}),a=s.extendSchema(i,o),u=n.model("projects",a);r.ProjectsModel=u},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Tasks=void 0;var i=t(1),a=t(2),u=t(22),l=i.Router();r.Tasks=l,l.route("/tasks/:idProject/").get((function(e,r){return s(void 0,void 0,void 0,(function(){var t,n,s,i;return o(this,(function(o){switch(o.label){case 0:t=e.params.idProject,n=new u.Tasks({idProject:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.process("getAll")];case 2:return s=o.sent(),a.response(!1,{result:s},r,200),[3,4];case 3:return i=o.sent(),a.response(!0,i.message,r,500),[3,4];case 4:return[2]}}))}))})).post((function(e,r){return s(void 0,void 0,void 0,(function(){var t,s,i,l,c;return o(this,(function(o){switch(o.label){case 0:t=e.body.args,s=e.params.idProject,i=new u.Tasks(n(n({},t),{idProject:s})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.process("store")];case 2:return l=o.sent(),a.response(!1,{result:l},r,200),[3,4];case 3:return c=o.sent(),a.response(!0,c.message,r,500),[3,4];case 4:return[2]}}))}))})),l.route("/tasks/:idProject/:idTask/").patch((function(e,r){return s(void 0,void 0,void 0,(function(){var t,s,i,l,c,f,p,d,h,b;return o(this,(function(o){switch(o.label){case 0:if(t=e.body.args,s=e.params,i=s.idProject,l=s.idTask,(c=e.query)&&0!==Object.keys(c).length)return[3,5];f=new u.Tasks(n(n({},t),{id:l,idProject:i})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,f.process("update")];case 2:return p=o.sent(),a.response(!1,{result:p},r,200),[3,4];case 3:return d=o.sent(),a.response(!0,d.message,r,500),[3,4];case 4:return[3,9];case 5:h=c.status,f=new u.Tasks({id:l,status:h}),o.label=6;case 6:return o.trys.push([6,8,,9]),[4,f.process("updateStatus")];case 7:return p=o.sent(),a.response(!1,{result:p},r,200),[3,9];case 8:return b=o.sent(),a.response(!0,b.message,r,500),[3,9];case 9:return[2]}}))}))})),l.route("/task/delete/:idTask/").delete((function(e,r){return s(void 0,void 0,void 0,(function(){var t,n,s,i;return o(this,(function(o){switch(o.label){case 0:t=e.params.idTask,n=new u.Tasks({id:t}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.process("deleteOne")];case 2:return s=o.sent(),a.response(!1,{result:s},r,200),[3,4];case 3:return i=o.sent(),a.response(!0,i.message,r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Tasks=void 0;var o=t(0),i=t(23),a=t(3),u=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"deleteOne":return this._deleteOne();case"getAll":return this._getAll();case"store":return this._store();case"update":return this._update();case"updateStatus":return this._updateStatus();default:return}},e.prototype._deleteOne=function(){return n(this,void 0,void 0,(function(){var e,r;return s(this,(function(t){switch(t.label){case 0:e=this._args.id,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i.TasksModel.findByIdAndDelete(e)];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(a.ErrorMessagesForTasksController.problemDeletingTasks);case 4:return[2]}}))}))},e.prototype._getAll=function(){return n(this,void 0,void 0,(function(){var e,r;return s(this,(function(t){switch(t.label){case 0:e=this._args.idProject,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i.TasksModel.find({idProject:new o.Types.ObjectId(e)})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(a.ErrorMessagesForTasksController.problemGettingAll);case 4:return[2]}}))}))},e.prototype._store=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,o,u,l,c;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.idProject,t=e.deadline,n=e.description,o=e.responsible,u=e.status,l=e.subTasks,s.label=1;case 1:if(s.trys.push([1,3,,4]),!r)throw new Error(a.GeneralErrorMessages.missingIdProject);if(!t)throw new Error(a.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(a.GeneralErrorMessages.invalidDate);if(!n)throw new Error(a.GeneralErrorMessages.missingDescription);if(!o)throw new Error(a.ErrorMessagesForTasksController.missingResponsible);if(!u)throw new Error(a.GeneralErrorMessages.missingStatus);if(!l)throw new Error(a.ErrorMessagesForTasksController.missingSubTasks);return void 0,[4,(l&&l.length>0?new i.TasksModel({deadline:new Date(t),description:n,idProject:r,responsible:o,status:u,subTasks:l}):new i.TasksModel({deadline:new Date(t),description:n,idProject:r,responsible:o,status:u})).save()];case 2:return[2,s.sent()];case 3:throw(c=s.sent()).message===a.GeneralErrorMessages.missingIdProject||c.message===a.GeneralErrorMessages.missingDeadline||c.message===a.GeneralErrorMessages.invalidDate||c.message===a.GeneralErrorMessages.missingDescription||c.message===a.ErrorMessagesForTasksController.missingResponsible||c.message===a.GeneralErrorMessages.missingStatus||c.message===a.ErrorMessagesForTasksController.missingSubTasks?c:(console.error(c),new Error(a.ErrorMessagesForTasksController.problemStoringTasks));case 4:return[2]}}))}))},e.prototype._update=function(){return n(this,void 0,void 0,(function(){var e,r,t,n,o,u,l,c,f;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.id,t=e.deadline,n=e.description,o=e.responsible,u=e.status,l=e.subTasks,s.label=1;case 1:if(s.trys.push([1,6,,7]),!t)throw new Error(a.GeneralErrorMessages.missingDeadline);if("Invalid Date"===new Date(t).toString())throw new Error(a.GeneralErrorMessages.invalidDate);if(!n)throw new Error(a.GeneralErrorMessages.missingDescription);if(!o)throw new Error(a.ErrorMessagesForTasksController.missingResponsible);if(!u)throw new Error(a.GeneralErrorMessages.missingStatus);if(!l)throw new Error(a.ErrorMessagesForTasksController.missingSubTasks);return c=void 0,l.length>0?[4,i.TasksModel.findByIdAndUpdate(r,{deadline:new Date(t),description:n,responsible:o,status:u,subTasks:l},{new:!0})]:[3,3];case 2:return c=s.sent(),[3,5];case 3:return[4,i.TasksModel.findByIdAndUpdate(r,{deadline:new Date(t),description:n,responsible:o,status:u},{new:!0})];case 4:c=s.sent(),s.label=5;case 5:return[2,c];case 6:throw(f=s.sent()).message===a.GeneralErrorMessages.missingDeadline||f.message===a.GeneralErrorMessages.invalidDate||f.message===a.GeneralErrorMessages.missingDescription||f.message===a.ErrorMessagesForTasksController.missingResponsible||f.message===a.GeneralErrorMessages.missingStatus||f.message===a.ErrorMessagesForTasksController.missingSubTasks?f:(console.error(f),new Error(a.ErrorMessagesForTasksController.problemStoringTasks));case 7:return[2]}}))}))},e.prototype._updateStatus=function(){return n(this,void 0,void 0,(function(){var e,r,t,n;return s(this,(function(s){switch(s.label){case 0:e=this._args,r=e.id,t=e.status,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.TasksModel.findByIdAndUpdate(r,{status:t})];case 2:return[2,s.sent()];case 3:throw n=s.sent(),console.error(n),n;case 4:return[2]}}))}))},e}();r.Tasks=u},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TasksModel=void 0;var n=t(0),s=t(24),o=new n.Schema({idProject:{ref:"projects",required:!0,type:n.Schema.Types.ObjectId},responsible:{required:!0,type:[String]},subTasks:[String]}),i=s.extendSchema(o),a=n.model("tasks",i);r.TasksModel=a},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.extendSchema=void 0;var s=t(0),o=t(5);r.extendSchema=function(e){return new s.Schema(n(n(n({},o.CommonDataForProjectsTasksAndJobOffers.obj),e.obj),{status:{required:!0,type:String}}))}},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Users=void 0;var o=t(1),i=t(2),a=t(26),u=o.Router();r.Users=u,u.route("/users/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,o,u;return s(this,(function(s){switch(s.label){case 0:t=e.query.type,n=new a.Users,s.label=1;case 1:switch(s.trys.push([1,6,,7]),t){case"clients":return[3,2]}return[3,4];case 2:return[4,n.process("getAllClients")];case 3:return o=s.sent(),i.response(!1,{result:o},r,200),[3,5];case 4:i.response(!0,"Request not allowed",r,500),s.label=5;case 5:return[3,7];case 6:return u=s.sent(),i.response(!0,u.message,r,500),[3,7];case 7:return[2]}}))}))}))},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Users=void 0;var i=function(){function e(){this._args=[]}return e.prototype.process=function(e){switch(e){case"getAllClients":return this._getAllClients();default:return}},e.prototype._getAllClients=function(){return s(this,void 0,void 0,(function(){var e=this;return o(this,(function(r){switch(r.label){case 0:return[4,global.firestoreDatabase.collection("users").where("role","==","client").get()];case 1:return r.sent().docs.map((function(r){return e._args.push(n({id:r.id},r.data()))})),[2,this._args]}}))}))},e}();r.Users=i},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.firebaseConnection=void 0;var i=o(t(28)),a=t(29),u={auth_provider_x509_cert_url:process.env.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,auth_uri:process.env.FIREBASE_AUTH_URI,client_email:process.env.FIREBASE_CLIENT_EMAIL,client_id:process.env.FIREBASE_CLIENT_ID,client_x509_cert_url:process.env.FIREBASE_X509_CERT,private_key:process.env.FIREBASE_PRIVATE_KEY,private_key_id:process.env.FIREBASE_PRIVATE_KEY_ID,project_id:process.env.FIREBASE_PROJECT_ID,token_uri:process.env.FIREBASE_TOKEN_URI,type:process.env.FIREBASE_TYPE};r.firebaseConnection=function(){return n(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,a.writeJson(process.env.GOOGLE_APPLICATION_CREDENTIALS,JSON.stringify(u).replace(/\\\\/g,"\\"),"utf8")];case 1:return r.sent(),e=i.default.initializeApp({credential:i.default.credential.applicationDefault(),databaseURL:process.env.FIREBASE_URL}),[4,a.deleteFile(process.env.GOOGLE_APPLICATION_CREDENTIALS)];case 2:return r.sent(),global.firestoreDatabase=i.default.firestore(e),console.log("Firebase connection established."),[2]}}))}))}},function(e,r){e.exports=require("firebase-admin")},function(e,r,t){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.writeJson=r.deleteFile=void 0;var s=n(t(30));r.writeJson=function(e,r,t){return new Promise((function(n,o){s.default.writeFile(e,r,t,(function(e){e?o(e):n("Success")}))}))};r.deleteFile=function(e){return new Promise((function(r,t){s.default.unlink(e,(function(e){e?t(e):r("Success")}))}))}},function(e,r){e.exports=require("fs")},function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.mongoConnection=void 0;var a=i(t(0)),u=a.default.connection,l={keepAlive:!0,useCreateIndex:!0,useFindAndModify:!1,useNewUrlParser:!0,useUnifiedTopology:!0};u.on("connected",(function(){console.log("Mongo connection established.")})),u.on("reconnected",(function(){console.log("Mongo connection reestablished.")})),u.on("disconnected",(function(){console.log("Mongo connection disconnected."),console.log("Trying to reconnected to Mongo..."),setTimeout((function(){a.default.connect(process.env.MONGO_URI,n(n({},l),{connectTimeoutMS:3e3,socketTimeoutMS:3e3}))}),3e3)})),u.on("close",(function(){console.log("Mongo connection closed.")})),u.on("error",(function(e){console.log("Mongo connection error:"),console.error(e)}));r.mongoConnection=function(){return s(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,a.default.connect(process.env.MONGO_URI,l)];case 1:return e.sent(),[2]}}))}))}},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.mysqlConnection=void 0;var i=o(t(33)),a={client:"mysql",connection:{database:process.env.MYSQL_DATABASE,host:process.env.MYSQL_HOST,password:process.env.MYSQL_PASS,user:process.env.MYSQL_USER}};r.mysqlConnection=function(){return n(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:global.mysqlDatabase=i.default(a),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,global.mysqlDatabase.raw("SELECT 'test connection';")];case 2:return r.sent(),console.log("MySql connection established."),[3,4];case 3:return e=r.sent(),console.error(e),[3,4];case 4:return[2]}}))}))}},function(e,r){e.exports=require("knex")}]);