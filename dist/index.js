!function(e){var r={};function t(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(s,o,function(r){return e[r]}.bind(null,o));return s},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/dist/",t(t.s=4)}([function(e,r){e.exports=require("express")},function(e,r){e.exports=require("mongoose")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.response=void 0;r.response=function(e,r,t,s){t.status(s).send({error:e,message:r})}},function(e,r,t){"use strict";var s,o;Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorMessagesForTasksController=r.ErrorMessagesForProjectsController=void 0,function(e){e.missingCategories="Categories must be provided.",e.missingDescription="Description must be provided",e.missingIdCompany="Id Company must be provided.",e.missingLimitDate="Limit date must be provided.",e.missingName="Name must be provided.",e.missingRoles="Roles must be provided",e.missingSubCategories="Sub Roles must be provided.",e.problemGettingAll="There was a problem getting all the projects.",e.problemGettingAllByCompany="There was a problem getting all the projects from the requested company.",e.problemGettingAllByStatus="There was a problem getting all the projects from the requested company int he requested status.",e.problemStoringProjects="There was a problem trying to store the project.",e.problemUpdatingProjects="There was a problem trying to update the project.",e.statusNotAllowed="That status is not allowed."}(s||(s={})),r.ErrorMessagesForProjectsController=s,function(e){e.missingIdCompany="Id company must be provided.",e.missingIdProject="Id project must be provided.",e.missingLimitDate="Limit date must be provided.",e.missingName="Name must be provided.",e.missingResponsible="Responsible must be provided.",e.missingStatus="Status must be provided.",e.missingSubTasks="Sub tasks must be provided.",e.problemDeleting="There was a problem deleting the tasks.",e.problemGettingAll="There was a problem getting all the tasks.",e.problemStoringTasks="There was a problem trying to store the task.",e.problemUpdatingTasks="There was a problem trying to update the task."}(o||(o={})),r.ErrorMessagesForTasksController=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t(5).Server.start()},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(o,n){function i(e){try{u(s.next(e))}catch(e){n(e)}}function a(e){try{u(s.throw(e))}catch(e){n(e)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,o,n,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,s&&(o=2&n[0]?s.return:n[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,s=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){i.label=n[1];break}if(6===n[0]&&i.label<o[1]){i.label=o[1],o=n;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(n);break}o[2]&&i.ops.pop(),i.trys.pop();continue}n=r.call(e,i)}catch(e){n=[6,e],s=0}finally{t=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Server=void 0;var a=i(t(0)),u=i(t(1)),l=i(t(6)),c=t(7),p=new(function(){function e(){this.app=a.default(),this._config()}return e.prototype._config=function(){this.app.set("port",process.env.PORT||"3000"),this.app.use(l.default("dev")),this.app.use(a.default.json()),this.app.use(a.default.urlencoded({extended:!1})),this.app.use((function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Headers","Authorization, Content-Type"),t()})),c.applyRoutes(this.app)},e.prototype._mongo=function(){return o(this,void 0,void 0,(function(){var e;return n(this,(function(r){switch(r.label){case 0:return this._connection=u.default.connection,e={keepAlive:!0,useCreateIndex:!0,useFindAndModify:!1,useNewUrlParser:!0,useUnifiedTopology:!0},this._connection.on("connected",(function(){console.log("Mongo connection established.")})),this._connection.on("reconnected",(function(){console.log("Mongo connection reestablished")})),this._connection.on("disconnected",(function(){console.log("Mongo connection disconnected"),console.log("Trying to reconnected to Mongo..."),setTimeout((function(){u.default.connect(process.env.MONGO_URI,s(s({},e),{connectTimeoutMS:3e3,socketTimeoutMS:3e3}))}),3e3)})),this._connection.on("close",(function(){console.log("Mongo connection closed")})),this._connection.on("error",(function(e){console.log("Mongo connection error:"),console.error(e)})),[4,u.default.connect(process.env.MONGO_URI,e)];case 1:return r.sent(),[2]}}))}))},e.prototype.start=function(){var e=this;this.app.listen(this.app.get("port"),(function(){return console.log("Server running at port "+e.app.get("port"))}));try{this._mongo()}catch(e){console.error(e)}},e}());r.Server=p},function(e,r){e.exports=require("morgan")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyRoutes=void 0;var s=t(8),o=t(9),n=t(12),i=[o.Projects,n.Tasks];r.applyRoutes=function(e){e.use("/",s.Home),i.forEach((function(r){return e.use("/api",r)}))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Home=void 0;var s=t(0),o=t(2),n=s.Router();r.Home=n,n.route("").get((function(e,r){o.response(!1,"Welcome to your Express Backend!",r,200)}))},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(o,n){function i(e){try{u(s.next(e))}catch(e){n(e)}}function a(e){try{u(s.throw(e))}catch(e){n(e)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,o,n,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,s&&(o=2&n[0]?s.return:n[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,s=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){i.label=n[1];break}if(6===n[0]&&i.label<o[1]){i.label=o[1],o=n;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(n);break}o[2]&&i.ops.pop(),i.trys.pop();continue}n=r.call(e,i)}catch(e){n=[6,e],s=0}finally{t=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Projects=void 0;var i=t(0),a=t(2),u=t(10),l=i.Router();r.Projects=l,l.route("/projects/").get((function(e,r){return o(void 0,void 0,void 0,(function(){var e,t,s;return n(this,(function(o){switch(o.label){case 0:e=new u.Projects,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.process("getAll")];case 2:return t=o.sent(),a.response(!1,{result:t},r,200),[3,4];case 3:return s=o.sent(),console.error(s),a.response(!0,{message:s.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/projects/:idCompany/").get((function(e,r){return o(void 0,void 0,void 0,(function(){var t,s,o,i,l,c,p;return n(this,(function(n){switch(n.label){case 0:if(t=e.params.idCompany,s=e.query,!(Object.keys(s).length>0))return[3,5];l=s.status,o=new u.Projects({idCompany:t,status:l}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o.process("getAllByStatus")];case 2:return i=n.sent(),a.response(!1,{result:i},r,200),[3,4];case 3:return c=n.sent(),console.error(c),a.response(!0,{message:c.message},r,500),[3,4];case 4:return[3,9];case 5:o=new u.Projects({idCompany:t}),n.label=6;case 6:return n.trys.push([6,8,,9]),[4,o.process("getAllByCompany")];case 7:return i=n.sent(),a.response(!1,{result:i},r,200),[3,9];case 8:return p=n.sent(),console.error(p),a.response(!0,{message:p.message},r,500),[3,9];case 9:return[2]}}))}))})).post((function(e,r){return o(void 0,void 0,void 0,(function(){var t,o,i,l,c;return n(this,(function(n){switch(n.label){case 0:t=e.body.args,o=e.params.idCompany,i=new u.Projects(s(s({},t),{idCompany:o})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,i.process("store")];case 2:return l=n.sent(),a.response(!1,{result:l},r,200),[3,4];case 3:return c=n.sent(),console.error(c),a.response(!0,{message:c.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/projects/:idCompany/:idProject/").patch((function(e,r){return o(void 0,void 0,void 0,(function(){var t,o,i,l,c,p,d;return n(this,(function(n){switch(n.label){case 0:t=e.body.args,o=e.params,i=o.idCompany,l=o.idProject,c=new u.Projects(s(s({},t),{idCompany:i,idProject:l})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c.process("update")];case 2:return p=n.sent(),a.response(!1,{result:p},r,200),[3,4];case 3:return d=n.sent(),console.error(d),a.response(!0,{message:d.message},r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(o,n){function i(e){try{u(s.next(e))}catch(e){n(e)}}function a(e){try{u(s.throw(e))}catch(e){n(e)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((s=s.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,s,o,n,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,s&&(o=2&n[0]?s.return:n[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,s=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){i.label=n[1];break}if(6===n[0]&&i.label<o[1]){i.label=o[1],o=n;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(n);break}o[2]&&i.ops.pop(),i.trys.pop();continue}n=r.call(e,i)}catch(e){n=[6,e],s=0}finally{t=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Projects=void 0;var n=t(11),i=t(3),a=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"getAll":return this._getAll();case"getAllByCompany":return this._getAllByCompany();case"getAllByStatus":return this._getAllByStatus();case"store":return this._store();case"update":return this._update();default:return}},e.prototype._getAll=function(){return s(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,n.ProjectsModel.find({})];case 1:return[2,r.sent()];case 2:throw e=r.sent(),console.error(e),new Error(i.ErrorMessagesForProjectsController.problemGettingAll);case 3:return[2]}}))}))},e.prototype._getAllByCompany=function(){return s(this,void 0,void 0,(function(){var e,r;return o(this,(function(t){switch(t.label){case 0:e=this._args.idCompany,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n.ProjectsModel.find({idCompany:e})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(i.ErrorMessagesForProjectsController.problemGettingAllByCompany);case 4:return[2]}}))}))},e.prototype._getAllByStatus=function(){return s(this,void 0,void 0,(function(){var e,r,t,s;return o(this,(function(o){switch(o.label){case 0:e=this._args,r=e.idCompany,t=e.status,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.ProjectsModel.find({idCompany:r,status:t})];case 2:return[2,o.sent()];case 3:throw s=o.sent(),console.error(s),new Error(i.ErrorMessagesForProjectsController.problemGettingAllByStatus);case 4:return[2]}}))}))},e.prototype._store=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,a,u,l,c,p;return o(this,(function(o){switch(o.label){case 0:if(e=this._args,r=e.categories,t=e.description,s=e.idCompany,a=e.limitDate,u=e.name,l=e.roles,c=e.subCategories,!r)throw new Error(i.ErrorMessagesForProjectsController.missingCategories);if(!t)throw new Error(i.ErrorMessagesForProjectsController.missingDescription);if(!s)throw new Error(i.ErrorMessagesForProjectsController.missingIdCompany);if(!a)throw new Error(i.ErrorMessagesForProjectsController.missingLimitDate);if(!u)throw new Error(i.ErrorMessagesForProjectsController.missingName);if(!l)throw new Error(i.ErrorMessagesForProjectsController.missingRoles);if(!c)throw new Error(i.ErrorMessagesForProjectsController.missingSubCategories);o.label=1;case 1:return o.trys.push([1,3,,4]),[4,new n.ProjectsModel({categories:r,description:t,idCompany:s,limitDate:a,name:u,roles:l,status:"published"}).save()];case 2:return[2,o.sent()];case 3:throw(p=o.sent()).message===i.ErrorMessagesForProjectsController.missingCategories||p.message===i.ErrorMessagesForProjectsController.missingDescription||p.message===i.ErrorMessagesForProjectsController.missingIdCompany||p.message===i.ErrorMessagesForProjectsController.missingLimitDate||p.message===i.ErrorMessagesForProjectsController.missingName||p.message===i.ErrorMessagesForProjectsController.missingRoles?p:(console.error(p),p(i.ErrorMessagesForProjectsController.problemStoringProjects));case 4:return[2]}}))}))},e.prototype._update=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,a,u,l,c,p,d;return o(this,(function(o){switch(o.label){case 0:if(e=this._args,r=e.categories,t=e.description,s=e.id,a=e.limitDate,u=e.name,l=e.roles,c=e.status,p=e.subCategories,!r)throw new Error(i.ErrorMessagesForProjectsController.missingCategories);if(!t)throw new Error(i.ErrorMessagesForProjectsController.missingDescription);if(!a)throw new Error(i.ErrorMessagesForProjectsController.missingLimitDate);if(!u)throw new Error(i.ErrorMessagesForProjectsController.missingName);if(!l)throw new Error(i.ErrorMessagesForProjectsController.missingRoles);if(!p)throw new Error(i.ErrorMessagesForProjectsController.missingSubCategories);if(!n.STATUS_NAMES.includes(c))throw new Error(i.ErrorMessagesForProjectsController.statusNotAllowed);o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.ProjectsModel.findByIdAndUpdate(s,{categories:r,description:t,limitDate:a,name:u,roles:l,status:c,subCategories:p},{new:!0})];case 2:return[2,o.sent()];case 3:throw(d=o.sent()).message===i.ErrorMessagesForProjectsController.missingCategories||d.message===i.ErrorMessagesForProjectsController.missingDescription||d.message===i.ErrorMessagesForProjectsController.missingLimitDate||d.message===i.ErrorMessagesForProjectsController.missingName||d.message===i.ErrorMessagesForProjectsController.missingRoles||d.message===i.ErrorMessagesForProjectsController.missingSubCategories||d.message===i.ErrorMessagesForProjectsController.statusNotAllowed?d:(console.error(d),new Error(i.ErrorMessagesForProjectsController.problemUpdatingProjects));case 4:return[2]}}))}))},e}();r.Projects=a},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATUS_NAMES=r.ProjectsModel=void 0;var s=t(1),o=["published","active","completed","canceled"];r.STATUS_NAMES=o;var n=new s.Schema({name:{required:!0,type:String},quantity:{required:!0,type:Number},remuneration:{required:!0,type:Number}}),i=new s.Schema({categories:{required:!0,type:[String]},description:{required:!0,type:String},idCompany:{required:!0,type:String},limitDate:{required:!0,type:Date},name:{required:!0,type:String},roles:{required:!0,type:[n]},status:{enum:o,required:!0,type:String},subCategories:{required:!0,type:String}},{timestamps:{createdAt:!0,updatedAt:!0}}),a=s.model("projects",i);r.ProjectsModel=a},function(e,r,t){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(o,n){function i(e){try{u(s.next(e))}catch(e){n(e)}}function a(e){try{u(s.throw(e))}catch(e){n(e)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((s=s.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,s,o,n,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,s&&(o=2&n[0]?s.return:n[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,s=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){i.label=n[1];break}if(6===n[0]&&i.label<o[1]){i.label=o[1],o=n;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(n);break}o[2]&&i.ops.pop(),i.trys.pop();continue}n=r.call(e,i)}catch(e){n=[6,e],s=0}finally{t=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Tasks=void 0;var i=t(0),a=t(2),u=t(13),l=i.Router();r.Tasks=l,l.route("/tasks/:idCompany/:idProject").get((function(e,r){return o(void 0,void 0,void 0,(function(){var t,s,o,i,l,c;return n(this,(function(n){switch(n.label){case 0:t=e.params,s=t.idCompany,o=t.idProject,i=new u.Tasks({idCompany:s,idProject:o}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,i.process("getAll")];case 2:return l=n.sent(),a.response(!1,{result:l},r,200),[3,4];case 3:return c=n.sent(),console.error(c),a.response(!0,{message:c.message},r,500),[3,4];case 4:return[2]}}))}))})).post((function(e,r){return o(void 0,void 0,void 0,(function(){var t,o,i,l,c,p,d;return n(this,(function(n){switch(n.label){case 0:t=e.body.args,o=e.params,i=o.idCompany,l=o.idProject,c=new u.Tasks(s(s({},t),{idCompany:i,idProject:l})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c.process("store")];case 2:return p=n.sent(),a.response(!1,{result:p},r,200),[3,4];case 3:return d=n.sent(),console.error(d),a.response(!0,{message:d.message},r,500),[3,4];case 4:return[2]}}))}))})),l.route("/tasks/:idTask").patch((function(e,r){return o(void 0,void 0,void 0,(function(){var t,o,i,l,c;return n(this,(function(n){switch(n.label){case 0:t=e.body.args,o=e.params.idTask,i=new u.Tasks(s(s({},t),{id:o})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,i.process("update")];case 2:return l=n.sent(),a.response(!1,{result:l},r,200),[3,4];case 3:return c=n.sent(),console.error(c),a.response(!0,{message:c.message},r,500),[3,4];case 4:return[2]}}))}))})).delete((function(e,r){return o(void 0,void 0,void 0,(function(){var t,s,o,i;return n(this,(function(n){switch(n.label){case 0:t=e.params.idTask,s=new u.Tasks({id:t}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s.process("deleteOne")];case 2:return o=n.sent(),a.response(!1,{result:o},r,200),[3,4];case 3:return i=n.sent(),console.error(i),a.response(!0,{message:i.message},r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))((function(o,n){function i(e){try{u(s.next(e))}catch(e){n(e)}}function a(e){try{u(s.throw(e))}catch(e){n(e)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}u((s=s.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,s,o,n,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,s&&(o=2&n[0]?s.return:n[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,s=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){i.label=n[1];break}if(6===n[0]&&i.label<o[1]){i.label=o[1],o=n;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(n);break}o[2]&&i.ops.pop(),i.trys.pop();continue}n=r.call(e,i)}catch(e){n=[6,e],s=0}finally{t=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Tasks=void 0;var n=t(14),i=t(3),a=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"deleteOne":return this._deleteOne();case"getAll":return this._getAll();case"store":return this._store();case"update":return this._update();default:return}},e.prototype._deleteOne=function(){return s(this,void 0,void 0,(function(){var e,r;return o(this,(function(t){switch(t.label){case 0:e=this._args.id,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n.TasksModel.findOneAndDelete({id:e})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(i.ErrorMessagesForTasksController.problemDeleting);case 4:return[2]}}))}))},e.prototype._getAll=function(){return s(this,void 0,void 0,(function(){var e,r,t,s;return o(this,(function(o){switch(o.label){case 0:e=this._args,r=e.idCompany,t=e.idProject,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.TasksModel.find({idCompany:r,idProject:t})];case 2:return[2,o.sent()];case 3:throw s=o.sent(),console.error(s),new Error(i.ErrorMessagesForTasksController.problemGettingAll);case 4:return[2]}}))}))},e.prototype._store=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,a,u,l,c,p;return o(this,(function(o){switch(o.label){case 0:if(e=this._args,r=e.idCompany,t=e.idProject,s=e.limitDate,a=e.name,u=e.responsible,l=e.status,c=e.subTasks,!r)throw new Error(i.ErrorMessagesForTasksController.missingIdCompany);if(!t)throw new Error(i.ErrorMessagesForTasksController.missingIdProject);if(!s)throw new Error(i.ErrorMessagesForTasksController.missingLimitDate);if(!a)throw new Error(i.ErrorMessagesForTasksController.missingName);if(!u)throw new Error(i.ErrorMessagesForTasksController.missingResponsible);if(!l)throw new Error(i.ErrorMessagesForTasksController.missingStatus);o.label=1;case 1:return o.trys.push([1,3,,4]),[4,new n.TasksModel({idCompany:r,idProject:t,limitDate:s,name:a,responsible:u,status:l,subTasks:c}).save()];case 2:return[2,o.sent()];case 3:throw(p=o.sent()).message===i.ErrorMessagesForTasksController.missingLimitDate||p.message===i.ErrorMessagesForTasksController.missingName||p.message===i.ErrorMessagesForTasksController.missingResponsible||p.message===i.ErrorMessagesForTasksController.missingStatus?p:(console.error(p),new Error(i.ErrorMessagesForTasksController.problemStoringTasks));case 4:return[2]}}))}))},e.prototype._update=function(){return s(this,void 0,void 0,(function(){var e,r,t,s,a,u,l,c;return o(this,(function(o){switch(o.label){case 0:if(e=this._args,r=e.id,t=e.limitDate,s=e.name,a=e.responsible,u=e.status,l=e.subTasks,!t)throw new Error(i.ErrorMessagesForTasksController.missingLimitDate);if(!s)throw new Error(i.ErrorMessagesForTasksController.missingName);if(!a)throw new Error(i.ErrorMessagesForTasksController.missingResponsible);if(!u)throw new Error(i.ErrorMessagesForTasksController.missingStatus);if(!l)throw new Error(i.ErrorMessagesForTasksController.missingSubTasks);o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.TasksModel.findByIdAndUpdate(r,{limitDate:t,name:s,responsible:a,status:u,subTasks:l},{new:!0})];case 2:return[2,o.sent()];case 3:throw c=o.sent(),console.error(c),new Error(i.ErrorMessagesForTasksController.problemUpdatingTasks);case 4:return[2]}}))}))},e}();r.Tasks=a},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TasksModel=void 0;var s=t(1),o=new s.Schema({idCompany:{required:!0,type:String},limitDate:{required:!0,type:Date},name:{required:!0,type:String},responsible:{required:!0,type:[String]},responsibleNumber:{required:!0,type:Number},status:{required:!0,type:String},subTasks:[String]},{timestamps:{createdAt:!0,updatedAt:!0}}),n=s.model("tasks",o);r.TasksModel=n}]);