!function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(o,n,function(r){return e[r]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/dist/",t(t.s=4)}([function(e,r){e.exports=require("express")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.response=void 0;r.response=function(e,r,t,o){t.status(o).send({error:e,message:r})}},function(e,r,t){"use strict";var o,n,s;Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorMessagesForTasksController=r.ErrorMessagesForProjectsController=r.ErrorMessagesForJobsController=void 0,function(e){e.problemGettingAll="There was a problem getting all the jobs."}(o||(o={})),r.ErrorMessagesForJobsController=o,function(e){e.invalidDate="Invalid Date",e.missingCategories="Categories must be provided.",e.missingDescription="Description must be provided",e.missingIdCompany="Id Company must be provided.",e.missingLimitDate="Limit date must be provided.",e.missingName="Name must be provided.",e.missingRoles="Roles must be provided",e.missingSubCategories="Sub categories must be provided.",e.problemGettingAll="There was a problem getting all the projects.",e.problemGettingAllByCompany="There was a problem getting all the projects from the requested company.",e.problemGettingAllByStatus="There was a problem getting all the projects from the requested company int he requested status.",e.problemStoringProjects="There was a problem trying to store the project.",e.problemUpdatingProjects="There was a problem trying to update the project.",e.statusNotAllowed="That status is not allowed."}(n||(n={})),r.ErrorMessagesForProjectsController=n,function(e){e.invalidDate="Invalid Date",e.missingIdCompany="Id company must be provided.",e.missingIdProject="Id project must be provided.",e.missingLimitDate="Limit date must be provided.",e.missingName="Name must be provided.",e.missingResponsible="Responsible must be provided.",e.missingStatus="Status must be provided.",e.missingSubTasks="Sub tasks must be provided.",e.problemDeleting="There was a problem deleting the tasks.",e.problemGettingAll="There was a problem getting all the tasks.",e.problemStoringTasks="There was a problem trying to store the task.",e.problemUpdatingTasks="There was a problem trying to update the task."}(s||(s={})),r.ErrorMessagesForTasksController=s},function(e,r){e.exports=require("mongoose")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t(5).Server.start()},function(e,r,t){"use strict";var o=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Server=void 0;var i=s(t(0)),a=s(t(6)),l=t(7),u=t(17),c=t(18),p=new(function(){function e(){this.app=i.default(),this._config()}return e.prototype._config=function(){this.app.set("port",process.env.PORT||"3000"),this.app.use(a.default("dev")),this.app.use(i.default.json()),this.app.use(i.default.urlencoded({extended:!1})),this.app.use((function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Headers","Authorization, Content-Type"),t()})),l.applyRoutes(this.app)},e.prototype._mongo=function(){return o(this,void 0,void 0,(function(){return n(this,(function(e){return this._mongoConnection=u.mongoConnection,this._mongoConnection(),[2]}))}))},e.prototype._mysql=function(){return o(this,void 0,void 0,(function(){return n(this,(function(e){return this._mysqlConnection=c.mysqlConnection,this._mysqlConnection(),[2]}))}))},e.prototype.start=function(){var e=this;this.app.listen(this.app.get("port"),(function(){return console.log("Server running at port "+e.app.get("port")+".")}));try{this._mongo(),this._mysql()}catch(e){console.error(e)}},e}());r.Server=p},function(e,r){e.exports=require("morgan")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyRoutes=void 0;var o=t(8),n=t(9),s=t(11),i=t(14),a=[n.Jobs,s.Projects,i.Tasks];r.applyRoutes=function(e){e.use("/",o.Home),a.forEach((function(r){return e.use("/api",r)}))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Home=void 0;var o=t(0),n=t(1),s=o.Router();r.Home=s,s.route("").get((function(e,r){n.response(!1,"Welcome to your Express Backend!",r,200)}))},function(e,r,t){"use strict";var o=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Jobs=void 0;var s=t(0),i=t(1),a=t(10),l=s.Router();r.Jobs=l,l.route("/jobs").get((function(e,r){return o(void 0,void 0,void 0,(function(){var e,t,o;return n(this,(function(n){switch(n.label){case 0:e=new a.Jobs,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.process("getAll")];case 2:return t=n.sent(),i.response(!1,{result:t},r,200),[3,4];case 3:return o=n.sent(),console.error(o),i.response(!0,{message:o.message},r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var o=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Jobs=void 0;var s=t(2),i=function(){function e(){this._allJobs=[]}return e.prototype.process=function(e){switch(e){case"getAll":return this._getAll();default:return}},e.prototype._getAll=function(){return o(this,void 0,void 0,(function(){var e,r,t,o=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,global.mysqlDatabase.select("id_jobfamily as id","description as jobFamily").from("jobfamily")];case 1:return e=n.sent(),[4,global.mysqlDatabase.select("j.id_jobfamily as jobFamilyId","o.id_ocupation as occupationId","o.description as occupation").from({j:"jobfamily"}).innerJoin({o:"ocupation"},"j.id_jobfamily","=","o.idfk_jobfamily")];case 2:return r=n.sent(),e.forEach((function(e){var t=[];r.forEach((function(r){r.jobFamilyId===e.id&&t.push({occupation:r.occupation,occupationId:r.occupationId})})),o._allJobs.push({jobFamily:e,occupations:t})})),[2,this._allJobs];case 3:throw t=n.sent(),console.error(t),new Error(s.ErrorMessagesForJobsController.problemGettingAll);case 4:return[2]}}))}))},e}();r.Jobs=i},function(e,r,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Projects=void 0;var i=t(0),a=t(1),l=t(12),u=i.Router();r.Projects=u,u.route("/projects/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var e,t,o;return s(this,(function(n){switch(n.label){case 0:e=new l.Projects,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.process("getAll")];case 2:return t=n.sent(),a.response(!1,{result:t},r,200),[3,4];case 3:return o=n.sent(),console.error(o),a.response(!0,{message:o.message},r,500),[3,4];case 4:return[2]}}))}))})),u.route("/projects/:idCompany/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,o,n,i,u,c,p;return s(this,(function(s){switch(s.label){case 0:if(t=e.params.idCompany,o=e.query,!(Object.keys(o).length>0))return[3,5];u=o.status,n=new l.Projects({idCompany:t,status:u}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.process("getAllByStatus")];case 2:return i=s.sent(),a.response(!1,{result:i},r,200),[3,4];case 3:return c=s.sent(),console.error(c),a.response(!0,{message:c.message},r,500),[3,4];case 4:return[3,9];case 5:n=new l.Projects({idCompany:t}),s.label=6;case 6:return s.trys.push([6,8,,9]),[4,n.process("getAllByCompany")];case 7:return i=s.sent(),a.response(!1,{result:i},r,200),[3,9];case 8:return p=s.sent(),console.error(p),a.response(!0,{message:p.message},r,500),[3,9];case 9:return[2]}}))}))})).post((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,i,u,c;return s(this,(function(s){switch(s.label){case 0:t=e.body.args,n=e.params.idCompany,i=new l.Projects(o(o({},t),{idCompany:n})),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.process("store")];case 2:return u=s.sent(),a.response(!1,{result:u},r,200),[3,4];case 3:return c=s.sent(),console.error(c),a.response(!0,{message:c.message},r,500),[3,4];case 4:return[2]}}))}))})),u.route("/projects/:idCompany/:idProject/").patch((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,i,u,c,p,f;return s(this,(function(s){switch(s.label){case 0:t=e.body.args,n=e.params,i=n.idCompany,u=n.idProject,c=new l.Projects(o(o({},t),{idCompany:i,idProject:u})),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,c.process("update")];case 2:return p=s.sent(),a.response(!1,{result:p},r,200),[3,4];case 3:return f=s.sent(),console.error(f),a.response(!0,{message:f.message},r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var o=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Projects=void 0;var s=t(13),i=t(2),a=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"getAll":return this._getAll();case"getAllByCompany":return this._getAllByCompany();case"getAllByStatus":return this._getAllByStatus();case"store":return this._store();case"update":return this._update();default:return}},e.prototype._getAll=function(){return o(this,void 0,void 0,(function(){var e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.ProjectsModel.find({})];case 1:return[2,r.sent()];case 2:throw e=r.sent(),console.error(e),new Error(i.ErrorMessagesForProjectsController.problemGettingAll);case 3:return[2]}}))}))},e.prototype._getAllByCompany=function(){return o(this,void 0,void 0,(function(){var e,r;return n(this,(function(t){switch(t.label){case 0:e=this._args.idCompany,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,s.ProjectsModel.find({idCompany:e})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(i.ErrorMessagesForProjectsController.problemGettingAllByCompany);case 4:return[2]}}))}))},e.prototype._getAllByStatus=function(){return o(this,void 0,void 0,(function(){var e,r,t,o;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.idCompany,t=e.status,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s.ProjectsModel.find({idCompany:r,status:t})];case 2:return[2,n.sent()];case 3:throw o=n.sent(),console.error(o),new Error(i.ErrorMessagesForProjectsController.problemGettingAllByStatus);case 4:return[2]}}))}))},e.prototype._store=function(){return o(this,void 0,void 0,(function(){var e,r,t,o,a,l,u,c,p;return n(this,(function(n){switch(n.label){case 0:if(e=this._args,r=e.categories,t=e.description,o=e.idCompany,a=e.limitDate,l=e.name,u=e.roles,c=e.subCategories,!r)throw new Error(i.ErrorMessagesForProjectsController.missingCategories);if(!t)throw new Error(i.ErrorMessagesForProjectsController.missingDescription);if(!o)throw new Error(i.ErrorMessagesForProjectsController.missingIdCompany);if(!a)throw new Error(i.ErrorMessagesForProjectsController.missingLimitDate);if("Invalid Date"===new Date(a).toString())throw new Error(i.ErrorMessagesForProjectsController.invalidDate);if(!l)throw new Error(i.ErrorMessagesForProjectsController.missingName);if(!u)throw new Error(i.ErrorMessagesForProjectsController.missingRoles);if(!c)throw new Error(i.ErrorMessagesForProjectsController.missingSubCategories);n.label=1;case 1:return n.trys.push([1,3,,4]),[4,new s.ProjectsModel({categories:r,description:t,idCompany:o,limitDate:new Date(a),name:l,roles:u,status:"published"}).save()];case 2:return[2,n.sent()];case 3:throw(p=n.sent()).message===i.ErrorMessagesForProjectsController.missingCategories||p.message===i.ErrorMessagesForProjectsController.missingDescription||p.message===i.ErrorMessagesForProjectsController.missingIdCompany||p.message===i.ErrorMessagesForProjectsController.missingLimitDate||p.message===i.ErrorMessagesForProjectsController.invalidDate||p.message===i.ErrorMessagesForProjectsController.missingName||p.message===i.ErrorMessagesForProjectsController.missingRoles?p:(console.error(p),p(i.ErrorMessagesForProjectsController.problemStoringProjects));case 4:return[2]}}))}))},e.prototype._update=function(){return o(this,void 0,void 0,(function(){var e,r,t,o,a,l,u,c,p,f;return n(this,(function(n){switch(n.label){case 0:if(e=this._args,r=e.categories,t=e.description,o=e.id,a=e.limitDate,l=e.name,u=e.roles,c=e.status,p=e.subCategories,!r)throw new Error(i.ErrorMessagesForProjectsController.missingCategories);if(!t)throw new Error(i.ErrorMessagesForProjectsController.missingDescription);if(!a)throw new Error(i.ErrorMessagesForProjectsController.missingLimitDate);if("Invalid Date"===new Date(a).toString())throw new Error(i.ErrorMessagesForProjectsController.invalidDate);if(!l)throw new Error(i.ErrorMessagesForProjectsController.missingName);if(!u)throw new Error(i.ErrorMessagesForProjectsController.missingRoles);if(!p)throw new Error(i.ErrorMessagesForProjectsController.missingSubCategories);if(!s.STATUS_NAMES.includes(c))throw new Error(i.ErrorMessagesForProjectsController.statusNotAllowed);n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s.ProjectsModel.findByIdAndUpdate(o,{categories:r,description:t,limitDate:a,name:l,roles:u,status:c,subCategories:p},{new:!0})];case 2:return[2,n.sent()];case 3:throw(f=n.sent()).message===i.ErrorMessagesForProjectsController.missingCategories||f.message===i.ErrorMessagesForProjectsController.missingDescription||f.message===i.ErrorMessagesForProjectsController.missingLimitDate||f.message===i.ErrorMessagesForProjectsController.invalidDate||f.message===i.ErrorMessagesForProjectsController.missingName||f.message===i.ErrorMessagesForProjectsController.missingRoles||f.message===i.ErrorMessagesForProjectsController.missingSubCategories||f.message===i.ErrorMessagesForProjectsController.statusNotAllowed?f:(console.error(f),new Error(i.ErrorMessagesForProjectsController.problemUpdatingProjects));case 4:return[2]}}))}))},e}();r.Projects=a},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATUS_NAMES=r.ProjectsModel=void 0;var o=t(3),n=["published","active","completed","canceled"];r.STATUS_NAMES=n;var s=new o.Schema({name:{required:!0,type:String},quantity:{required:!0,type:Number},remuneration:{required:!0,type:Number}}),i=new o.Schema({categories:{required:!0,type:[String]},description:{required:!0,type:String},idCompany:{required:!0,type:String},limitDate:{required:!0,type:Date},name:{required:!0,type:String},roles:{required:!0,type:[s]},status:{enum:n,required:!0,type:String},subCategories:{required:!0,type:String}},{timestamps:{createdAt:!0,updatedAt:!0}}),a=o.model("projects",i);r.ProjectsModel=a},function(e,r,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Tasks=void 0;var i=t(0),a=t(1),l=t(15),u=i.Router();r.Tasks=u,u.route("/tasks/:idCompany/:idProject/").get((function(e,r){return n(void 0,void 0,void 0,(function(){var t,o,n,i,u,c;return s(this,(function(s){switch(s.label){case 0:t=e.params,o=t.idCompany,n=t.idProject,i=new l.Tasks({idCompany:o,idProject:n}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.process("getAll")];case 2:return u=s.sent(),a.response(!1,{result:u},r,200),[3,4];case 3:return c=s.sent(),console.error(c),a.response(!0,{message:c.message},r,500),[3,4];case 4:return[2]}}))}))})).post((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,i,u,c,p,f;return s(this,(function(s){switch(s.label){case 0:t=e.body.args,n=e.params,i=n.idCompany,u=n.idProject,c=new l.Tasks(o(o({},t),{idCompany:i,idProject:u})),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,c.process("store")];case 2:return p=s.sent(),a.response(!1,{result:p},r,200),[3,4];case 3:return f=s.sent(),console.error(f),a.response(!0,{message:f.message},r,500),[3,4];case 4:return[2]}}))}))})),u.route("/tasks/:idCompany/:idProject/:idTask/").patch((function(e,r){return n(void 0,void 0,void 0,(function(){var t,n,i,u,c,p,f,d;return s(this,(function(s){switch(s.label){case 0:t=e.body.args,n=e.params,i=n.idCompany,u=n.idProject,c=n.idTask,p=new l.Tasks(o(o({},t),{id:c,idCompany:i,idProject:u})),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,p.process("update")];case 2:return f=s.sent(),a.response(!1,{result:f},r,200),[3,4];case 3:return d=s.sent(),console.error(d),a.response(!0,{message:d.message},r,500),[3,4];case 4:return[2]}}))}))})),u.route("/task/:idTask/").delete((function(e,r){return n(void 0,void 0,void 0,(function(){var t,o,n,i;return s(this,(function(s){switch(s.label){case 0:t=e.params.idTask,o=new l.Tasks({id:t}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.process("deleteOne")];case 2:return n=s.sent(),a.response(!1,{result:n},r,200),[3,4];case 3:return i=s.sent(),console.error(i),a.response(!0,{message:i.message},r,500),[3,4];case 4:return[2]}}))}))}))},function(e,r,t){"use strict";var o=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Tasks=void 0;var s=t(16),i=t(2),a=function(){function e(e){void 0===e&&(e=null),this._args=e}return e.prototype.process=function(e){switch(e){case"deleteOne":return this._deleteOne();case"getAll":return this._getAll();case"store":return this._store();case"update":return this._update();default:return}},e.prototype._deleteOne=function(){return o(this,void 0,void 0,(function(){var e,r;return n(this,(function(t){switch(t.label){case 0:e=this._args.id,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,s.TasksModel.findOneAndDelete({id:e})];case 2:return[2,t.sent()];case 3:throw r=t.sent(),console.error(r),new Error(i.ErrorMessagesForTasksController.problemDeleting);case 4:return[2]}}))}))},e.prototype._getAll=function(){return o(this,void 0,void 0,(function(){var e,r,t,o;return n(this,(function(n){switch(n.label){case 0:e=this._args,r=e.idCompany,t=e.idProject,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s.TasksModel.find({idCompany:r,idProject:t})];case 2:return[2,n.sent()];case 3:throw o=n.sent(),console.error(o),new Error(i.ErrorMessagesForTasksController.problemGettingAll);case 4:return[2]}}))}))},e.prototype._store=function(){return o(this,void 0,void 0,(function(){var e,r,t,o,a,l,u,c,p;return n(this,(function(n){switch(n.label){case 0:if(e=this._args,r=e.idCompany,t=e.idProject,o=e.limitDate,a=e.name,l=e.responsible,u=e.status,c=e.subTasks,!r)throw new Error(i.ErrorMessagesForTasksController.missingIdCompany);if(!t)throw new Error(i.ErrorMessagesForTasksController.missingIdProject);if(!o)throw new Error(i.ErrorMessagesForTasksController.missingLimitDate);if("Invalid Date"===new Date(o).toString())throw new Error(i.ErrorMessagesForTasksController.invalidDate);if(!a)throw new Error(i.ErrorMessagesForTasksController.missingName);if(!l)throw new Error(i.ErrorMessagesForTasksController.missingResponsible);if(!u)throw new Error(i.ErrorMessagesForTasksController.missingStatus);n.label=1;case 1:return n.trys.push([1,3,,4]),[4,new s.TasksModel({idCompany:r,idProject:t,limitDate:new Date(o),name:a,responsible:l,status:u,subTasks:c}).save()];case 2:return[2,n.sent()];case 3:throw(p=n.sent()).message===i.ErrorMessagesForTasksController.missingIdCompany||p.message===i.ErrorMessagesForTasksController.missingIdProject||p.message===i.ErrorMessagesForTasksController.missingLimitDate||p.message===i.ErrorMessagesForTasksController.invalidDate||p.message===i.ErrorMessagesForTasksController.missingName||p.message===i.ErrorMessagesForTasksController.missingResponsible||p.message===i.ErrorMessagesForTasksController.missingStatus?p:(console.error(p),new Error(i.ErrorMessagesForTasksController.problemStoringTasks));case 4:return[2]}}))}))},e.prototype._update=function(){return o(this,void 0,void 0,(function(){var e,r,t,o,a,l,u,c;return n(this,(function(n){switch(n.label){case 0:if(e=this._args,r=e.id,t=e.limitDate,o=e.name,a=e.responsible,l=e.status,u=e.subTasks,!t)throw new Error(i.ErrorMessagesForTasksController.missingLimitDate);if("Invalid Date"===new Date(t).toString())throw new Error(i.ErrorMessagesForTasksController.invalidDate);if(!o)throw new Error(i.ErrorMessagesForTasksController.missingName);if(!a)throw new Error(i.ErrorMessagesForTasksController.missingResponsible);if(!l)throw new Error(i.ErrorMessagesForTasksController.missingStatus);if(!u)throw new Error(i.ErrorMessagesForTasksController.missingSubTasks);n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s.TasksModel.findByIdAndUpdate(r,{limitDate:new Date(t),name:o,responsible:a,status:l,subTasks:u},{new:!0})];case 2:return[2,n.sent()];case 3:throw(c=n.sent()).message===i.ErrorMessagesForTasksController.missingLimitDate||c.message===i.ErrorMessagesForTasksController.invalidDate||c.message===i.ErrorMessagesForTasksController.missingName||c.message===i.ErrorMessagesForTasksController.missingResponsible||c.message===i.ErrorMessagesForTasksController.missingStatus||c.message===i.ErrorMessagesForTasksController.missingSubTasks?c:(console.error(c),new Error(i.ErrorMessagesForTasksController.problemStoringTasks));case 4:return[2]}}))}))},e}();r.Tasks=a},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TasksModel=void 0;var o=t(3),n=new o.Schema({idCompany:{required:!0,type:String},limitDate:{required:!0,type:Date},name:{required:!0,type:String},responsible:{required:!0,type:[String]},responsibleNumber:{required:!0,type:Number},status:{required:!0,type:String},subTasks:[String]},{timestamps:{createdAt:!0,updatedAt:!0}}),s=o.model("tasks",n);r.TasksModel=s},function(e,r,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.mongoConnection=void 0;var a=i(t(3)),l=a.default.connection,u={keepAlive:!0,useCreateIndex:!0,useFindAndModify:!1,useNewUrlParser:!0,useUnifiedTopology:!0};l.on("connected",(function(){console.log("Mongo connection established.")})),l.on("reconnected",(function(){console.log("Mongo connection reestablished.")})),l.on("disconnected",(function(){console.log("Mongo connection disconnected."),console.log("Trying to reconnected to Mongo..."),setTimeout((function(){a.default.connect(process.env.MONGO_URI,o(o({},u),{connectTimeoutMS:3e3,socketTimeoutMS:3e3}))}),3e3)})),l.on("close",(function(){console.log("Mongo connection closed.")})),l.on("error",(function(e){console.log("Mongo connection error:"),console.error(e)}));r.mongoConnection=function(){return n(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,a.default.connect(process.env.MONGO_URI,u)];case 1:return e.sent(),[2]}}))}))}},function(e,r,t){"use strict";var o=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((o=o.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],o=0}finally{t=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.mysqlConnection=void 0;var i=s(t(19)),a={client:"mysql",connection:{database:process.env.MYSQL_DATABASE,host:process.env.MYSQL_HOST,password:process.env.MYSQL_PASS,user:process.env.MYSQL_USER}};r.mysqlConnection=function(){return o(void 0,void 0,void 0,(function(){var e;return n(this,(function(r){switch(r.label){case 0:global.mysqlDatabase=i.default(a),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,global.mysqlDatabase.raw("SELECT 'test connection';")];case 2:return r.sent(),console.log("MySql connection established."),[3,4];case 3:return e=r.sent(),console.error(e),[3,4];case 4:return[2]}}))}))}},function(e,r){e.exports=require("knex")}]);